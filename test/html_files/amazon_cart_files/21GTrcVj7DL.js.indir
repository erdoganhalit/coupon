(function(b){var e=window.AmazonUIPageJS||window.P,h=e._namespace||e.attributeErrors,a=h?h("PromotionsCartAssets",""):e;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,e,h){b.when("A","PromotionsActionHandlerFactory","PromotionsCSMUtil").execute(function(a,f,d){a.declarative("promotion-cta-link","click",function(c){d.logUECounter("PromotionCtaLink",1);var a=c.data;c=c.$target;f.get(a).execute(a,c)})});"use strict";b.when("A","PromoRedirectActionHandler","PromoModalActionHandler",
"PromoRedeemActionHandler","PromoMiniPspRedirectActionHandler","AmazonBasketDetailsActionHandler").register("PromotionsActionHandlerFactory",function(a,f,d,c,e,g){return{get:function(a){var b=a.linkUrl;return"undefined"!==typeof a.detailsUrl&&(b.includes("minipsp")||b.includes("psp"))?g:b.includes("redeem")?c:b.includes("minipsp")?e:b.includes("popup")?d:f}}});"use strict";b.when("A","PromotionsCSMUtil").register("PromoRedirectActionHandler",function(a,f){return{execute:function(a,c){f.logUECounter("PromotionRedirectAction",
1);e.location.href=a.linkUrl}}});"use strict";b.when("A","a-modal","PromoRedirectActionHandler","PromotionsCSMUtil").register("PromoModalActionHandler",function(a,f,b,c){return{execute:function(d,g){c.logUECounter("PromotionModalAction",1);a.ajax(d.linkUrl,{method:"get",success:function(a){c.logUECounter("PromotionModalAction:Success",1);f.create(g,{name:"UnifiedPromotionModal",inlineContent:a,dataStrategy:"inline"}).show()},error:function(){c.logUECounter("PromotionModalAction:Failure",1);var a=
new URL(d.linkUrl,e.location.origin);if(a=(new URLSearchParams(a.search)).get("redirectLandingPageUrl"))c.logUECounter("PromotionModalAction:Failure:Fallback",1),b.execute({linkUrl:a})}})}}});"use strict";b.when("A","a-sheet","PromoRedirectActionHandler","PromotionsCSMUtil").register("PromoBottomSheetActionHandler",function(a,b,d,c){return{execute:function(f,g){c.logUECounter("PromotionBottomSheetAction",1);a.ajax(f.linkUrl,{method:"get",success:function(d){c.logUECounter("PromotionBottomSheetAction:Success",
1);b.create({name:"UnifiedPromotionBottomSheet",inlineContent:d,closeType:"icon",height:600}).show();a.trigger("UnifiedPromotionBottomSheet:Show",f)},error:function(){c.logUECounter("PromotionBottomSheetAction:Failure",1);var a=new URL(f.linkUrl,e.location.origin);if(a=(new URLSearchParams(a.search)).get("redirectLandingPageUrl"))c.logUECounter("PromotionBottomSheetAction:Failure:Fallback",1),d.execute({linkUrl:a})}})}}});"use strict";b.when("A","PromotionsCSMUtil").register("PromoRedeemActionHandler",
function(a,b){function d(a){b.logUECounter("PromotionRedeemAction:Failure",1);a.ajaxFailMessage&&alert(a.ajaxFailMessage)}return{execute:function(c,f){b.logUECounter("PromotionRedeemAction",1);a.ajax(c.linkUrl,{method:"get",success:function(c){if(c.includes&&(c.includes("FAILURE")||c.includes("EXCEEDED"))||0==c.status)d();else{b.logUECounter("PromotionRedeemAction:Success",1);c=a.$(f).closest(".sc-unified-promotion-widget");var e=c.find(".sc-unified-promotion-message-wrapper");a.hide(e);c=c.find(".sc-unified-promotion-success-message-wrapper");
a.show(c)}},error:function(){d(c)}})}}});"use strict";b.when("A","PromoRedirectActionHandler","PromotionsCSMUtil").register("PromoMiniPspRedirectActionHandler",function(a,b,d){return{execute:function(a,f){d.logUECounter("PromoMiniPspRedirectAction",1);a=new URL(a.linkUrl,e.location.origin);(a=(new URLSearchParams(a.search)).get("redirectLandingPageUrl"))&&b.execute({linkUrl:a})}}});"use strict";b.when("A","PromotionsCSMUtil").execute(function(a,b){function d(){b.logUECounter("PromoMiniPspCloseAction",
1);e&&e.location&&e.location.reload()}a.on("UnifiedPromotionBottomSheet:Show",function(c){if(c.linkUrl.includes("minipsp"))a.on("a:sheet:beforeHide:UnifiedPromotionBottomSheet",d)})});"use strict";b.when("A","PromotionsCSMUtil").register("AmazonBasketDetailsActionHandler",function(a,b){return{execute:function(d,c){b.logUECounter("AmazonBasketDetailsAction",1);a.trigger("a:declarative:unified-promotion-with-recommendations-modal-action:click",{data:{detailsUrl:d.detailsUrl},$target:c,$currentTarget:c})}}});
"use strict";b.when("A").register("PromotionsCSMUtil",function(a){return{logUECounter:function(a,b){"undefined"!==typeof e.ue&&"undefined"!==typeof e.ue.count&&e.ue.count("PromotionsCartAssets:"+a,b||1)}}})});