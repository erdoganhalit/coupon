(function(v){var h=window.AmazonUIPageJS||window.P,k=h._namespace||h.attributeErrors,I=k?k("SocialShareWidgetAUI","AmazonUI"):h;I.guardFatal?I.guardFatal(v)(I,window):I.execute(function(){v(I,window)})})(function(v,h,k){function I(e){if(Array.isArray(e)){for(var k=0,h=Array(e.length);k<e.length;k++)h[k]=e[k];return h}return Array.from(e)}"use strict";"use strict";v.register("SocialShareWidget",function(){var e;(function(){var k={353:function(e,a,l){Object.defineProperty(a,"__esModule",{value:!0});
var f=l(905),b=l(738);e=function(){function a(){var x=this;this.generateTimestampCollection=function(){var a=(new Date).getTimezoneOffset();a=x.getDateTimeByOffset(a);var c=x.getDateTimeByOffset(0);return{hitDay:a.split("T")[0],hitDatetime:a,hitDatetimeUtc:c}};this.getMarketplaceId=function(a){return"string"==typeof a?a:h.ue&&h.ue.mid?h.ue.mid:b.CSA_DEFAULT_VALUE.string};var c=this.generateTimestampCollection();this.csaMetricsData={schemaId:a.CSA_SCHEMA_ID,userAgentId:b.CSA_DEFAULT_VALUE.number,hitDay:c.hitDay,
hitDatetime:c.hitDatetime,hitDatetimeUtc:c.hitDatetimeUtc,pageType:h.ue_pty?h.ue_pty:b.CSA_DEFAULT_VALUE.string,subPageType:h.ue_spty?h.ue_spty:b.CSA_DEFAULT_VALUE.string,sessionId:h.ue&&h.ue.sid?h.ue.sid:b.CSA_DEFAULT_VALUE.string}}return a.prototype.withCSAClickEventData=function(a){var c=a.shareDataAttributes;if(this.csaMetricsData.customerId=c.customerId?c.customerId:b.CSA_DEFAULT_VALUE.string,this.csaMetricsData.httpRequestId=c.requestId?c.requestId:b.CSA_DEFAULT_VALUE.string,this.csaMetricsData.asin=
c.asin?c.asin:b.CSA_DEFAULT_VALUE.string,this.csaMetricsData.ingress=c.ingress?c.ingress:b.CSA_DEFAULT_VALUE.string,this.csaMetricsData.platform=c.platform?c.platform:b.CSA_DEFAULT_VALUE.string,this.csaMetricsData.isInternal=this.getCSANumberMapping(c.isInternal),this.csaMetricsData.isRobot=this.getCSANumberMapping(c.isRobot),this.csaMetricsData.channel=a.channel?a.channel:b.CSA_DEFAULT_VALUE.string,this.csaMetricsData.refMarker=a.refMarker?a.refMarker:b.CSA_DEFAULT_VALUE.string,this.csaMetricsData.referrerUrl=
a.refererURL?a.refererURL:b.CSA_DEFAULT_VALUE.string,this.csaMetricsData.marketplaceId=this.getMarketplaceId(c.marketplaceId),this.csaMetricsData.isExperiment=/T\d+/.test(a.treatment)?"Y":"N",this.csaMetricsData.triggeredFromScreenshotToast=!!c.triggeredFromScreenshotToast&&c.triggeredFromScreenshotToast,a.weblab)c=this.csaMetricsData.shareEntities,(c=void 0===c?{}:c)[a.weblab]=a.treatment,this.csaMetricsData.shareEntities=c;a.customizeShareCSAData&&(c=this.csaMetricsData.shareEntities,c=void 0===
c?{}:c,a.customizeShareCSAData.isCustomizedExperienceEnabled===b.TRUE&&(c.backgroundImagePhysicalId=a.customizeShareCSAData.backgroundImagePhysicalId,c.deviceCoverImagePhysicalId=a.customizeShareCSAData.deviceCoverImagePhysicalId,c.hasQuote=a.customizeShareCSAData.hasQuote,c.isCustomized=a.customizeShareCSAData.isCustomized,c.customizePreSelected=a.customizeShareCSAData.customizePreSelected,c.isQuotesAvailable=a.customizeShareCSAData.isQuotesAvailable,this.csaMetricsData.shareEntities=c));a.isCustomShareOptionsSheetEnabled&&
(c=this.csaMetricsData.shareEntities,(c=void 0===c?{}:c).isCustomShareOptionsSheetEnabled="1",this.csaMetricsData.shareEntities=c);a.caf&&(c=this.csaMetricsData.shareEntities,(c=void 0===c?{}:c).cafSwitchEnabled=a.cafSwitchEnabled?b.TRUE:b.FALSE,this.csaMetricsData.shareEntities=c);a.cafEdCXIngressWeblabTreatment&&(c=this.csaMetricsData.shareEntities,(c=void 0===c?{}:c).cafEdCxIngressWelabT1="T1"===a.cafEdCXIngressWeblabTreatment?b.TRUE:b.FALSE,c.cafEdCxIngressWelabT2="T2"===a.cafEdCXIngressWeblabTreatment?
b.TRUE:b.FALSE);return this},a.prototype.withShareHitType=function(a){return this.csaMetricsData.shareHitType=a||b.CSA_DEFAULT_VALUE.string,this},a.prototype.getCSANumberMapping=function(a){return isNaN(Number(a))?2:Number(a)},a.prototype.getDateTimeByOffset=function(b){var c=new Date;0!==b&&(b*=a.MINUTES_TO_MILISECONDS,c=c.getTime()-b,c=new Date(c));return c.toISOString().split("Z")[0].split(".")[0]},a.prototype.logEvent=function(){(0,f.isCSALoaded)()&&h.csa(a.CSAPluginId,{producerId:a.CSA_PRODUCER_ID})(a.CSA_LOG_EVENT,
this.csaMetricsData)},a.MINUTES_TO_MILISECONDS=6E4,a.CSAPluginId="Events",a.CUSTOMIZE_SHARE_ENTITY_NAME="CustomizeShare",a.CSA_PRODUCER_ID="social-share",a.CSA_LOG_EVENT="log",a.CSA_SCHEMA_ID="SocialShareCSACustomEvent.CSAShareMetrics.8",a}();a.default=e},305:function(e,a){Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,f){var b={email:{label:"Email",name:"email",ref:"em",shareBaseUrl:"mailto:",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","email-circular.svg"),
imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","email-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(b){var c="?subject\x3d".concat(encodeURIComponent(a.emailSubject||a.title)),d="\x26body\x3d".concat(encodeURIComponent(a.title));b=encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref));return"".concat(this.shareBaseUrl).concat(c).concat(d," ").concat(b)}},pi:{label:"Pinterest",name:"pinterest",ref:"pi",shareBaseUrl:"https://www.pinterest.com/pin/create/button/",
image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","pinterest-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","pinterest-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){b="?url\x3d".concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));var c="\x26description\x3d".concat(encodeURIComponent(a.title)),d="\x26media\x3d".concat(encodeURIComponent(a.image));return"".concat(this.shareBaseUrl).concat(b).concat(c).concat(d,
"\x26method\x3dbutton")}},li:{label:"Line",name:"line",ref:"li",shareBaseUrl:"https://social-plugins.line.me/lineit/share",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","line-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","line-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){var c="?text\x3d".concat(encodeURIComponent(a.text)," ").concat(encodeURIComponent(a.title));b="\x26url\x3d".concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));
return"".concat(this.shareBaseUrl).concat(c).concat(b)}},fb:{label:"Facebook",name:"facebook",ref:"fa",shareBaseUrl:"https://www.facebook.com/dialog/share",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","facebook-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","facebook-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){b=encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref));var c=encodeURIComponent(a.shareUrl.getReturnForChannel(this.ref).replace("_r_",
"_s_")),d=encodeURIComponent("#"+(a.hashtags[0]||"Amazon"));b=["?_encoding\x3dUTF8\x26app_id\x3d465632727431967\x26display\x3dpopup","href\x3d".concat(b),"redirect_uri\x3d".concat(c),"hashtag\x3d".concat(d)].join("\x26");return"".concat(this.shareBaseUrl).concat(b)}},tw:{label:"X",name:"x",ref:"tw",shareBaseUrl:"https://twitter.com/intent/tweet",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","x-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"x-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){var c="?text\x3d".concat(encodeURIComponent(a.title));b="\x26url\x3d".concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));var d="\x26hashtags\x3d".concat(a.hashtags.join(",")),x="\x26via\x3d".concat(encodeURIComponent("Amazon"));return"".concat(this.shareBaseUrl).concat(c).concat(b).concat(d).concat(x)}},wa:{label:"WhatsApp",name:"whatsapp",ref:"wa",shareBaseUrl:"https://api.whatsapp.com/send?text\x3d",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"whatsapp-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","whatsapp-squared.svg"),canOpenInPopup:!0,getSharingUrl:function(b){b="\n              ".concat(encodeURIComponent(a.title),"\n              ").concat(encodeURIComponent(a.text),"\n              ").concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));return"".concat(this.shareBaseUrl).concat(b)}},sms:{label:"SMS",name:"sms",ref:"sms",shareBaseUrl:"sms:",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/",
"sms-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","sms-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(b){b="\n              ".concat(encodeURIComponent(a.title),"\n              ").concat(encodeURIComponent(b||a.shareUrl.getReturnForChannel(this.ref)));return"".concat(this.shareBaseUrl).concat(b)}},embed:{label:"Embed",name:"embed",ref:"eb",shareBaseUrl:"",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","embed-circular.svg"),
imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","embed-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(){return""}},copy:{label:"Copy",name:"copy",ref:"cp",shareBaseUrl:"",image:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","link-circular.svg"),imageSquared:"".concat("https://m.media-amazon.com/images/G/01/share-icons/","link-squared.svg"),canOpenInPopup:!1,getSharingUrl:function(){return""}}};if(null==f?0:f.length){var d={};return f.forEach(function(a){b[a]&&
(d[a]=b[a])}),d}return b}},738:function(e,a){Object.defineProperty(a,"__esModule",{value:!0});a.Err={Abort:"AbortError"};e=a.CSA_HIT_TYPE={};e.CLICK_SUCCESS="click_success";e.CLICK_ERROR="click_error";e.CLICK_CANCEL="click_cancel";e.SHARE="share";e.CUSTOMIZE_SHARE="click_customize_success";a.customize="customize";a.customShareOptions="customShareOptions";a.customizeShareStateKey="customizeShareCSAData";a.CSA_DEFAULT_VALUE={string:"unknown",number:0,boolean:2};a.CAF_LEARN_MORE_KEY="learn_more_link";
a.CAF_INFO_ICON_KEY="info_icon";a.UNKNOWN="unknown";a.DEFAULT_CSA_REF_ID="u_";a.EMPTY_STRING="";a.RAW_CHANNEL_PREFIX="raw:";a.CP_CHANNEL_REF="cp";a.CUSTOM_SHARE_OPTIONS_CP_CHANNEL_REF="cso_cp";a.CUSTOM_SHARE_OPTIONS_REF_PREFIX="cso";a.BOOKS_REF_PREFIX="bks";a.BOOKS_CUSTOMIZE_PREVIEW_NOT_AVAILABLE="t2cna";a.CAF_REF_PREFIX="caf";a.EMBED_CHANNEL_REF="eb";a.BEST_FORMAT_REF="ffobk";a.FALSE="false";a.TRUE="true";a.CUSTOM_SHEET_CLICK_LATENCY_METRIC="CustomShareSheet.Click";a.CAF_CUSTOM_SHEET_CLICK_LATENCY_METRIC=
"Caf.CustomShareSheet.Click";a.BOOKS_CUSTOM_SHEET_CLICK_LATENCY_METRIC="Books.CustomShareSheet.Click";a.SSF_AUI_PACKAGE_ATTRIBUTION="SocialShareWidgetAUI";a.REGEX_TO_REF_ID_AND_CHANNEL_APP={instagram:{refId:"in",channel:"Instagram"},snap:{refId:"sn",channel:"Snapchat"},discord:{refId:"di",channel:"Discord"},viber:{refId:"vi",channel:"Viber"},telegram:{refId:"te",channel:"Telegram"},pinterest:{refId:"pi",channel:"Pinterest"},qzone:{refId:"qz",channel:"QQ Zone"},renren:{refId:"re",channel:"Renren"},
twitter:{refId:"tw",channel:"Twitter"},airdrop:{refId:"ar",channel:"AirDrop"},tencentweibo:{refId:"tc",channel:"Tencent Weibo"},wechatmoment:{refId:"wm",channel:"WeChat Moment"},line:{refId:"li",channel:"Line"},whatsapp:{refId:"wa",channel:"Whatsapp"},weibo:{refId:"si",channel:"Sina Weibo"},facebook:{refId:"fb",channel:"Facebook"}};a.defaultShareDataAttributes={isInternal:a.CSA_DEFAULT_VALUE.boolean,isRobot:a.CSA_DEFAULT_VALUE.boolean,userAgent:a.CSA_DEFAULT_VALUE.number,platform:a.CSA_DEFAULT_VALUE.string,
ingress:a.CSA_DEFAULT_VALUE.string,asin:a.CSA_DEFAULT_VALUE.string,requestId:a.CSA_DEFAULT_VALUE.string,customerId:a.CSA_DEFAULT_VALUE.string,marketplaceId:a.CSA_DEFAULT_VALUE.string};a.defaultCustomizeShareCSAData={backgroundImagePhysicalId:a.EMPTY_STRING,deviceCoverImagePhysicalId:a.EMPTY_STRING,hasQuote:a.EMPTY_STRING,isCustomizedExperienceEnabled:a.EMPTY_STRING,isCustomized:a.EMPTY_STRING}},905:function(e,a,l){Object.defineProperty(a,"__esModule",{value:!0});a.isSafari=a.isCSALoaded=a.isNativeAppShareAvailable=
a.isNativeWebShareAvailable=a.isMobileWeb=a.isMobileApp=a.isDesktop=a.isIpadIOS=a.isIOS=a.isAndroid=a.isIE=a.isAUILoaded=a.isUeAvailable=a.isClipboardAvailable=a.isRTL=a.isTwisterAsin=a.context=a.Device=void 0;var f,b=l(161);!function(a){a.Android="apan";a.IOS="apin";a.MWeb="mwn";a.Other="ud"}(f||(a.Device=f={}));a.context=function(){var b=f.Other;(0,a.isMobileApp)()&&(0,a.isAndroid)()?b=f.Android:(0,a.isMobileApp)()&&(0,a.isIOS)()?b=f.IOS:(0,a.isMobileWeb)()&&(b=f.MWeb);var c="unknown";return(0,
a.isMobileApp)()?c="mshop":(0,a.isMobileWeb)()?c="mweb":(0,a.isDesktop)()&&(c="desktop"),{device:b,page:(0,a.isUeAvailable)()?h.ue_pty:"unknown",subPage:(0,a.isUeAvailable)()?h.ue_spty||h.ue_pti:"unknown",platform:c}};a.isTwisterAsin=function(){return!!h.isTwisterPage||!!h.twisterController||d};a.isRTL=function(){return"rtl"===document.dir};a.isClipboardAvailable=function(){return!!navigator.clipboard&&(0,b.isFunction)(navigator.clipboard.writeText)};a.isUeAvailable=function(){return!!h.ue};a.isAUILoaded=
function(){var a;return"undefined"!=typeof h&&(0,b.isString)(null===(a=null===h||void 0===h?void 0:h.P)||void 0===a?void 0:a.AUI_BUILD_DATE)};a.isIE=function(){return(0,b.testUserAgent)(/MSIE|Trident/i)};a.isAndroid=function(){return(0,b.testUserAgent)(/android.([1-9]|[L-Z])/i)&&!(0,b.testUserAgent)(/trident|Edge/i)};a.isIOS=function(){return(0,b.testUserAgent)(/OS [1-9][0-9]*(_[0-9]*)+ like Mac OS X/i)&&!(0,b.testUserAgent)(/trident|Edge/i)};a.isIpadIOS=function(){return(0,b.testUserAgent)(/[a-zA-z]{1,}\/[0-99].[0-99] \(Macintosh; [a-zA-z]{1,} Mac OS X [1-9][0-9]*_[1-9][0-9]*_[1-9][0-9]*\) AppleWebKit\/[1-9][0-9]*.[1-9][0-9]*.[1-9][0-9]*/)||
(0,b.testUserAgent)(/iPad/)};a.isDesktop=function(){return!((0,a.isAndroid)()||(0,a.isIOS)()||(0,a.isMobileApp)()||(0,a.isMobileWeb)())};a.isMobileApp=function(){return/(Windowshop|Amazon|Amazon\.com)\//.test((0,b.getCookie)("amzn-app-id"))};a.isMobileWeb=function(){return 450>=h.screen.availWidth&&((0,b.testUserAgent)(/mobile|mini/i)||(0,a.isAndroid)()||(0,a.isIOS)())};a.isNativeWebShareAvailable=function(){return h.navigator&&(0,b.isFunction)(h.navigator.share)};a.isNativeAppShareAvailable=function(a){return a&&
(0,b.isFunction)(a.share)};a.isCSALoaded=function(){return(0,b.isFunction)(h.csa)};a.isSafari=function(){var a;return/apple/i.test(null===(a=h.navigator)||void 0===a?void 0:a.vendor)};var d=!1;(0,a.isAUILoaded)()&&h.P.when("mobile-inline-twister-critical").execute(function(){d=!0});a.default={context:a.context,isTwisterAsin:a.isTwisterAsin,isClipboardAvailable:a.isClipboardAvailable,isUeAvailable:a.isUeAvailable,isAUILoaded:a.isAUILoaded,isIE:a.isIE,isAndroid:a.isAndroid,isDesktop:a.isDesktop,isIOS:a.isIOS,
isIpadIOS:a.isIpadIOS,isMobileApp:a.isMobileApp,isMobileWeb:a.isMobileWeb,isNativeWebShareAvailable:a.isNativeWebShareAvailable,isNativeAppShareAvailable:a.isNativeAppShareAvailable,isCSALoaded:a.isCSALoaded,isSafari:a.isSafari,isRTL:a.isRTL}},495:function(e,a,l){Object.defineProperty(a,"__esModule",{value:!0});var f=l(905),b=l(353),d=l(738);e=function(){function a(){}return a.logCountOnce=function(a){(0,f.isUeAvailable)()&&h.ue.count(a,(h.ue.count(a)||0)+1)},a.emitFullMetricName=function(a,b,d){var c=
this;(0,f.isAUILoaded)()&&h.P.when("A").execute(function(p){p.trigger("".concat(c.BASE_METRIC_NAME,":metrics:logged"),{fullMetricName:a,callee:b,message:d})})},a.logCounter=function(a,b){b=b?".".concat(b):"";a="".concat(this.BASE_METRIC_NAME,".").concat(a).concat(b);this.emitFullMetricName(a,"logCounter");this.logCountOnce(a)},a.logCounterRefactor=function(a,b){b=b?".".concat(b.toLowerCase()):"";a="".concat(this.BASE_METRIC_NAME).concat(b,".").concat(this.platform).concat(this.metricName,".").concat(a.toLowerCase());
this.emitFullMetricName(a,"logCounterRefactor");this.logCountOnce(a)},a.logLoad=function(a){a="".concat(this.BASE_METRIC_NAME,".").concat(this.platform).concat(this.metricName,".").concat(a.toLowerCase());this.logCountOnce(a)},a.logFatal=function(a){(0,f.isAUILoaded)()&&h.P.log(a,"FATAL",this.BASE_METRIC_NAME)},a.logCSAEvent=function(a,d){(0,f.isCSALoaded)()&&(new b.default).withCSAClickEventData(d).withShareHitType(a).logEvent()},a.startTimer=function(a){a="".concat(this.BASE_METRIC_NAME,".").concat(this.LATENCY,
".").concat(a);this.timers[a]=h.uet&&h.uet("bb",a,{wb:1})},a.stopTimer=function(a){a="".concat(this.BASE_METRIC_NAME,".").concat(this.LATENCY,".").concat(a);var b=this.timers[a];(0,f.isUeAvailable)()&&b&&(b=h.uet("be",a,{wb:1})-b,h.ue.count(a,b),h.uex&&h.uex("ld",a,{wb:1}),this.emitFullMetricName(a,"stopTimer","".concat(b,"ms")),delete this.timers[a],this.timers["".concat(a,"_done_in")]=b)},a.BASE_METRIC_NAME="SocialShareFramework",a.LATENCY="Latency",a.platform=d.UNKNOWN,a.metricName="",a.timers=
{},a.getMetricName=function(b,d){var c;if(void 0===d&&(d=""),(0,f.isUeAvailable)()){var e=(0,f.context)();a.platform=e.platform;a.metricName=d?".".concat(d.toLowerCase()):""}b=b('[data-action\x3d"ssf-share-icon"]').data();d=d?".".concat(d):"";return b?(b=(null===(c=b.ssfShareIcon)||void 0===c?void 0:c.shareDataAttributes)||{},c=b.ingress,b=b.platform,b=void 0===b?"unknown":b,"".concat(void 0===c?"unknown":c,".").concat(b).concat(d).toLowerCase()):""},a}();a.default=e},241:function(e,a,l){Object.defineProperty(a,
"__esModule",{value:!0});var f,b=l(905),d=l(738);!function(a){a.RETURN="r";a.CLICK="cl"}(f||(f={}));e=function(){function a(a,f){if(void 0===a&&(a="ur"),void 0===f&&(f=void 0),this.PREFIX="cm_sw",this.id="",this.refId="",this._isBestFormatEnabled=!1,this.cxt={device:b.Device.Other,page:"",subPage:"",platform:d.UNKNOWN},2>a.length)throw new TypeError("refId must be 2 or more characters long");this.refId=a;this.cxt=(0,b.context)();this.treatment=f;this.generateUniqueId()}return Object.defineProperty(a.prototype,
"isBestFormatEnabled",{set:function(a){this._isBestFormatEnabled=a},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"return",{get:function(){return this.get(f.RETURN)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"click",{get:function(){return this.get(f.CLICK)},enumerable:!1,configurable:!0}),a.prototype.getReturnForChannel=function(a){var b,c=null!==(b=this.treatment)&&void 0!==b?b:"";return[this.PREFIX,f.RETURN,this._isBestFormatEnabled?d.BEST_FORMAT_REF:
"",a,this.cxt.device,this.refId,c,this.id].filter(function(a){return a&&""!==a}).join("_")},a.prototype.getClickForChannel=function(a){return[this.PREFIX,f.CLICK,this._isBestFormatEnabled?d.BEST_FORMAT_REF:"",a,this.cxt.device,this.refId,this.id].filter(function(a){return a&&""!==a}).join("_")},a.prototype.generateUniqueId=function(){var a,b=null===(a=null===h||void 0===h?void 0:h.ue)||void 0===a?void 0:a.rid;return b||(b="".concat(Math.random().toString(36).slice(2)).concat(Math.random().toString(36).slice(2)).substring(0,
13)),this.id=b},a.prototype.get=function(a){var b,c=null!==(b=this.treatment)&&void 0!==b?b:"";return[this.PREFIX,a,this._isBestFormatEnabled?d.BEST_FORMAT_REF:"",this.cxt.device,this.refId,c,this.id].filter(function(a){return a&&""!==a}).join("_")},a}();a.default=e},198:function(e,a,l){var f=this&&this.__assign||function(){return f=Object.assign||function(a){for(var b,g=1,d=arguments.length;g<d;g++)for(var c in b=arguments[g])Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a},f.apply(this,
arguments)};Object.defineProperty(a,"__esModule",{value:!0});var b,d=l(495),k=l(905),c=l(474),m=l(161),t=l(738);(0,k.isAUILoaded)()&&h.P.when("mash").execute(function(a){return b=a});e=function(){function a(a){this.sheetOptions={title:t.EMPTY_STRING,text:t.EMPTY_STRING,shareUrl:new c.default("http://amazon.com/","ur"),lang:"en",shareDataAttributes:t.defaultShareDataAttributes,refererURL:"",image:"",customizeShareCSAData:t.defaultCustomizeShareCSAData,isCustomShareOptionsSheetEnabled:!1};this.sheetOptions=
f(f({},this.sheetOptions),a);this.shareUrl=a.shareUrl}return a.prototype.launchNativeWeb=function(){var a,b=this,c=this.sheetOptions.shareDataAttributes.ingress,f={channel:t.EMPTY_STRING,refMarker:this.shareUrl.refMarker.click,refererURL:this.sheetOptions.refererURL,shareDataAttributes:this.sheetOptions.shareDataAttributes,customizeShareCSAData:this.sheetOptions.customizeShareCSAData},e=this.shareUrl.return;this.sheetOptions.tinyUrl&&(e=this.sheetOptions.tinyUrl,d.default.logCounter("MWeb.Tiny.Success"),
d.default.logCounterRefactor("Tiny.Success",c));var l=(0,m.isFunction)(this.sheetOptions.sheetShownCallback);try{null===(a=null===h||void 0===h?void 0:h.navigator)||void 0===a||a.share({url:e,title:this.sheetOptions.title,text:this.sheetOptions.text}).then(function(){l&&b.sheetOptions.sheetShownCallback();d.default.logCSAEvent(t.CSA_HIT_TYPE.CLICK_SUCCESS,f);d.default.logCSAEvent(t.CSA_HIT_TYPE.SHARE,f);(0,m.isFunction)(b.sheetOptions.incrementShareCount)&&b.sheetOptions.incrementShareCount(f.refMarker);
d.default.logCounterRefactor("ChannelClick",b.sheetOptions.shareDataAttributes.ingress);d.default.logCounter("ShareClick")}).catch(function(a){l&&b.sheetOptions.sheetShownCallback();d.default.logCSAEvent(t.CSA_HIT_TYPE.CLICK_SUCCESS,f);a.name===t.Err.Abort&&d.default.logCSAEvent(t.CSA_HIT_TYPE.CLICK_CANCEL,f)})}catch(q){d.default.logCSAEvent(t.CSA_HIT_TYPE.CLICK_ERROR,f)}},a.prototype.launchNativeApp=function(){var a=this,g=this.shareUrl.refMarker.click,c=this.sheetOptions.shareDataAttributes,e=this.sheetOptions.refererURL,
u=this.sheetOptions.customizeShareCSAData,l=this.sheetOptions.shareDataAttributes.ingress,q=t.EMPTY_STRING,k=this.sheetOptions.caf||!1,x=this.sheetOptions.cafSwitchEnabled||!1,h=this.sheetOptions.isCustomShareOptionsSheetEnabled||!1,n=this.shareUrl.return,y=(0,m.isFunction)(this.sheetOptions.incrementShareCount);this.sheetOptions.tinyUrl&&(n=this.sheetOptions.tinyUrl,d.default.logCounter("MShop.Tiny.Success"),d.default.logCounterRefactor("Tiny.Success",l));var z={channel:q,refMarker:g,refererURL:e,
shareDataAttributes:c,customizeShareCSAData:u,caf:k,cafSwitchEnabled:x,isCustomShareOptionsSheetEnabled:h};c={messagePlain:this.getShareMessage,messagePlain160:this.getShare160Message,messagePlain140:this.getShare140Message,messageHTML:this.getShareMessage,url:n,imageURL:this.sheetOptions.image,subject:this.sheetOptions.text};null==b||b.share(f(f({},c),{successCallback:function(){(0,m.isFunction)(a.sheetOptions.sheetShownCallback)&&a.sheetOptions.sheetShownCallback();d.default.logCSAEvent(t.CSA_HIT_TYPE.CLICK_SUCCESS,
z)},failCallback:function(){d.default.logCSAEvent(t.CSA_HIT_TYPE.CLICK_ERROR,z)},shareServiceSelectedCallback:function(b){b&&"'null'"!==b?((0,m.isFunction)(a.sheetOptions.channelSelectCB)&&a.sheetOptions.channelSelectCB(b),z.channel=a.getChannelByKeyword(b).channel,b=a.getChannelByKeyword(b).refId,z.refMarker=a.shareUrl.refMarker.getClickForChannel(b),d.default.logCSAEvent(t.CSA_HIT_TYPE.SHARE,z),d.default.logCounterRefactor("ChannelClick",a.sheetOptions.shareDataAttributes.ingress),d.default.logCounter("ShareClick"),
(0,m.isFunction)(a.sheetOptions.sdTooltipCallback)&&a.sheetOptions.sdTooltipCallback(),y&&a.sheetOptions.incrementShareCount(g)):("MSHOP_ANDROID"===a.sheetOptions.shareDataAttributes.platform&&y&&a.sheetOptions.incrementShareCount(g),d.default.logCSAEvent(t.CSA_HIT_TYPE.CLICK_CANCEL,z))}}))},a.prototype.launch=function(a){(0,k.isNativeAppShareAvailable)(b)?this.launchNativeApp():(0,k.isNativeWebShareAvailable)()?this.launchNativeWeb():(0,m.isFunction)(a)?a():(d.default.logCounter("Click.ShareUnavailable"),
d.default.logCounterRefactor("Click.ShareUnavailable",this.sheetOptions.shareDataAttributes.ingress))},Object.defineProperty(a.prototype,"getShare160Message",{get:function(){var a=this.sheetOptions.tinyUrl||this.shareUrl.return,b=a.length+2;b=(0,m.truncate)(this.sheetOptions.title,160-b);return"".concat(b," ").concat(a)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"getShare140Message",{get:function(){var a=this.sheetOptions.tinyUrl||this.shareUrl.return,b=a.length+2;b=(0,m.truncate)(this.sheetOptions.title,
140-b);return"".concat(b," ").concat(a)},enumerable:!1,configurable:!0}),a.prototype.getRefByRegex=function(a){return t.REGEX_TO_REF_ID_AND_CHANNEL_APP[a].refId},a.prototype.getChannelByRegex=function(a){return t.REGEX_TO_REF_ID_AND_CHANNEL_APP[a].channel},a.prototype.getChannelByKeyword=function(a){var b=t.RAW_CHANNEL_PREFIX+a,d=t.DEFAULT_CSA_REF_ID,c=a.match(/instagram|snap|discord|viber|telegram|pinterest|qzone|renren|twitter|airdrop|tencentweibo|wechatmoment|line|whatsapp|weibo|^Facebook$/ig);
if(c&&c.length)return{channel:this.getChannelByRegex(c[0].toLowerCase()),refId:this.getRefByRegex(c[0].toLowerCase())};switch(!0){case /android.messaging|sms|android.apps.messaging|mms/gi.test(a):b="SMS";d="sm";break;case /outlook|mail/gi.test(a):b="Email";d="em";break;case /clipboardactivity|copy/gi.test(a):b="Copy";d="cp";break;case /facebook.composer/gi.test(a):b="Facebook";d="fb";break;case /facebook.messenger|FacebookMessenger/gi.test(a):b="FacebookMessenger";d="fm";break;case /tencent|wechat/gi.test(a):b=
"WeChat";d="we";break;case /unknown|null/gi.test(a):b="unknown",d="u"}return{channel:b,refId:d}},Object.defineProperty(a.prototype,"getShareMessage",{get:function(){var a=this.sheetOptions.tinyUrl||this.shareUrl.return;return"".concat(this.sheetOptions.title," ").concat(a)},enumerable:!1,configurable:!0}),a}();a.default=e},474:function(e,a,l){Object.defineProperty(a,"__esModule",{value:!0});var f=l(241);e=function(){function a(b,e,c){this.REF_PARAM_NAME="ref_";a.isValid(b)||(b=a.getDefault());this.url=
new URL(b);this._refMarker=new f.default(e,c)}return a.prototype.getUpdatedUrl=function(a){var b=new URL(this.raw);return b.searchParams.set(this.REF_PARAM_NAME,a),b.toString()},Object.defineProperty(a.prototype,"raw",{get:function(){return this.url.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"refMarker",{get:function(){return this._refMarker},enumerable:!1,configurable:!0}),a.isValid=function(a){try{new URL(a)}catch(x){return!1}return!0},a.getDefault=function(){var a,
b,c=null===(a=null===h||void 0===h?void 0:h.location)||void 0===a?void 0:a.href;if(!c)return(null===(b=null===h||void 0===h?void 0:h.ue)||void 0===b?0:b.sn)?"https://".concat(h.ue.sn):"https://amazon.com";a=new URL(c);b=a.searchParams.has("psc")?"?psc\x3d1":"";return h.ue_pti?"".concat(h.location.origin,"/dp/").concat(h.ue_pti).concat(b):(a.search=b,a.href)},a.prototype.getReturnForChannel=function(a){a=this._refMarker.getReturnForChannel(a);return this.getUpdatedUrl(a)},a.prototype.getClickForChannel=
function(a){a=this._refMarker.getClickForChannel(a);return this.getUpdatedUrl(a)},Object.defineProperty(a.prototype,"return",{get:function(){return this.getUpdatedUrl(this._refMarker.return)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"click",{get:function(){return this.getUpdatedUrl(this._refMarker.click)},enumerable:!1,configurable:!0}),a}();a.default=e},161:function(e,a){Object.defineProperty(a,"__esModule",{value:!0});a.getDPXObject=a.sanitizeInput=a.getCookie=a.testUserAgent=
a.truncate=a.isString=a.isEmpty=a.isNumber=a.isFunction=void 0;a.isFunction=function(a){return"function"==typeof a};a.isNumber=function(a){return!isNaN(a)&&"number"==typeof a};a.isEmpty=function(a){return!a||!a.length};a.isString=function(a){return"string"==typeof a};a.truncate=function(a,f){void 0===a&&(a="");var b=Array(3).fill(".");return a.length>f?a.substring(0,f-3)+b.join(""):a};a.testUserAgent=function(a){if(!h&&!h.navigator)return!1;try{return a.test(h.navigator.userAgent)}catch(f){return!1}};
a.getCookie=function(a){a="".concat(a,"\x3d");for(var f=document.cookie.split(";"),b=0;b<f.length;b++){for(var d=f[b];" "==d.charAt(0);)d=d.substring(1);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return""};a.sanitizeInput=function(a){return a.replace(/[<>&'"]/g,function(a){switch(a){case "\x3c":return"\x26lt;";case "\x3e":return"\x26gt;";case "\x26":return"\x26amp;";case "'":return"\x26#39;";case '"':return"\x26quot;";default:return a}})};a.getDPXObject=function(){var a,f;return null===
(f=null===(a=h.DetailPage)||void 0===a?void 0:a.StateController)||void 0===f?void 0:f.state};a.default={isFunction:a.isFunction,isNumber:a.isNumber,isEmpty:a.isEmpty,isString:a.isString,truncate:a.truncate,testUserAgent:a.testUserAgent,getCookie:a.getCookie,getDPXObject:a.getDPXObject}},156:function(e,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={}},519:function(e,a,k){Object.defineProperty(a,"__esModule",{value:!0});a.SocialShareCore=void 0;e=k(305);var f=k(474),b=k(156),d=k(495),
l=k(198),c=k(241),m=k(905),t=k(738);k=k(161);a.SocialShareCore={Channels:e.default,Url:f.default,Translations:b.default,Metrics:d.default,ShareSheet:l.default,RefMarker:c.default,Detection:m.default,Constants:t,ToolBelt:k};a.default=a.SocialShareCore}},B={};e=function l(a){var e=B[a];if(void 0!==e)return e.exports;e=B[a]={exports:{}};return k[a].call(e.exports,e,e.exports,l),e.exports}(519)})();return e});"use strict";v.register("SocialShareWidgetConfig",function(){var e=Object.freeze({MODAL:"modal",
POPOVER:"popover"}),k=Object.freeze({IOS:"ios",ANDROID:"android",ARROW:"arrow",VARIABLE:"variable"});return{WIDGET_TYPE:e,WIDGET_ICON:k,excludedChannels:["sms","wa"],lineMarketplaces:["A1VC38T7YXB528"],cnMarketplace:["AAHKV2X7AFYLW"],nonCNChannels:["fb","tw","pi"],defaultShareData:{url:"",title:location.hostname,text:"",image:"",hashtags:["Amazon"],type:e.POPOVER,lang:"en",refId:"ts",channels:[],refererURL:"",treatment:"",weblab:"",customize:!1,previewDoh:!1,caf:!1,displayCustomShareSheet:!1,cafSwitch:!1,
eventPreviewTreatment:"C",cafIngressId:"",t:{},associateLink:{},popoverPosition:"triggerBottom",popoverDistance:48,defaultCustomShareOptions:{email:{label:"Email",image:"customchannels-email.png",ref:"em",shareUrl:"mailto:?subject\x3d{subject}\x26body\x3d{body}\x26url\x3d{url}",className:"email",stringId:"taf_customshare_email"},copy:{label:"Copy",image:"customchannels-link.png",ref:"cp",shareUrl:"",className:"custom-share-copy",stringId:"taf_customshare_copy"},more:{label:"More",image:"customchannels-more.png",
ref:"",shareUrl:"",className:"custom-share-native-sheet",stringId:"taf_customshare_more"}},isFallbackShareUrlEnabled:!1,isNewIMessagePreviewGating:!1,isOnShareGatingEnabled:!1,isIpadFixesEnabled:!1,isNewWhatsAppPreview:!1,skipTwisterAPI:"C",isBestFormatEnabled:!1,isCafPreviewGenerationMigrationEnabled:!1,isUnrecognizedUsersRichPreviewEnabled:!1,customizePreSelected:!1,isAndroidCopyLinkGatingEnabled:!1,isUnsignedShareSheetGatingEnabled:!1,isUnsignedShareSheetCopyLinkOverrideEnabled:!1,isShortTitleGatingEnabled:!1,
isShortTitleAsyncGatingEnabled:!1,titleSource:""},defaultWidgetData:{icon:k.VARIABLE,background:!0,width:24},shareDataAttributes:{isInternal:2,isRobot:2,userAgent:h.navigator.userAgent,platform:"DESKTOP",ingress:h.ue_pty,asin:h.ue_pti,requestId:h.ue_id,customerId:"",marketplaceId:h.ue_mid,triggeredFromScreenshotToast:!1},iconMap:{ios:"https://m.media-amazon.com/images/G/01/share-icons/share-std.svg",android:"https://m.media-amazon.com/images/G/01/share-icons/share-android.svg",arrow:"https://m.media-amazon.com/images/G/01/share-icons/share-icon-experiment.svg"},
customShareOptions:[]}});"use strict";v.when("A","SocialShareWidget","SocialShareWidgetTemplating","SocialShareWidgetConfig","SocialShareWidgetState","SocialShareWidgetNativeUtils").register("SocialShareWidgetAUI",function(e,n,B,m,a,l){var f=n.SocialShareCore,b=f.Metrics,d=0,x=function(){},c=!1,w=b.getMetricName(e.$);b.startTimer(w);b.logCounter("DPX.Desktop.ImageBlockRender");try{(function(){var t=e.$,n=f.Detection,p=f.Translations,g=f.Channels,r=f.Url,A=f.Constants,u=function(a){a=a.data("share")||
a.find("[data-share]").data("share");return e.extend({},m.defaultWidgetData,a)},C=t(".ssf-share-trigger"),q=m.defaultShareData,F=u(C),D=q.url,O=t("#ac-getlink-bottomsheet"),J=t('[data-action\x3d"ssf-share-icon"]'),y=function(){var a=m.iconMap;if(F.icon===m.WIDGET_ICON.ARROW)return a.arrow;if(n.isDesktop())return a.ios;if(F.icon===m.WIDGET_ICON.VARIABLE){var b=e.$("#ssf-primary-widget-desktop");q=e.extend(q,b.data("ssfShareIcon"));b=a.android;if(n.isIOS()||q.isIpadFixesEnabled&&n.isIpadIOS())b=a.ios;
return b}return a[F.icon]},z=function(a){a.find('[class*\x3d"ssf-multi-"]').length||a.find(".ssf-share-trigger").addClass("ssf-multi-"+Math.random().toString(36).slice(2));C=a.find('[class*\x3d"ssf-multi-"]')},L=void 0,H=void 0,Q=void 0,M=void 0,V=void 0,P=void 0,N=void 0;v.when("a-sheet").execute(function(a){return L=a});v.when("a-popover").execute(function(a){return H=a});v.when("a-modal").execute(function(a){return Q=a});v.when("SocialShareWidgetTiny").execute(function(a){return N=a});var S=function(a,
b){var g=2<arguments.length&&arguments[2]!==k?arguments[2]:"ssf-share-bottom-sheet",d=q.displayCustomShareSheet||q.customize||q.caf;if(!M||d)M=L.create({name:g,inlineContent:a,closeType:"icon",height:b});L.showSheet(M)},G=function(a){var b=a.type===m.WIDGET_TYPE.POPOVER&&H,g=a.type===m.WIDGET_TYPE.MODAL&&Q;a=B.build(a);L?S(a.getBottom()):b?(b=a.getPopover(),C.hasClass("a-declarative")||(V=H.create(C,{name:"ssf-share-popover",position:q.popoverPosition,inlineContent:b,activate:"onclick",closeButton:!0,
width:160,padding:"none",popoverLabel:"Share Popup",closeButtonLabel:"Close Share Popup"}).show())):g&&(b=a.getModal(),C.hasClass("a-declarative")||(P=Q.create(C,{name:"ssf-share-modal",inlineContent:b,width:600,popoverLabel:"Share Modal"}).show()))},W=function(a){if(a.displayCustomShareSheet||a.customize||a.caf)b.logCounter("webview.sharesheet.caf.background"),b.logCounterRefactor("webview.sharesheet.caf.background",a.shareDataAttributes.ingress),v.when("mash").execute(function(a){a.addEventListener("appPause",
K)})},Y=function(a){v.when("SocialShareWidgetCustomize").execute(function(b){B.build(a).getCustomize(function(g){S(g,650,"ssf-customize-bottom-sheet");b.init(a,G,K);W(a)})})},K=function ea(){v.when("mash").execute(function(a){a.removeEventListener("appPause",ea)});V&&H.get(C).hide();M&&L.hideSheet(M);P&&Q.get(C).hide()},T=function(){var a=q.shareDataAttributes.asin,b=h.DetailPage;if(!b)return!1;b=b.StateController&&b.StateController.getState().current_asin;q.shareDataAttributes.asin="string"==typeof b?
b:a;return a!==b},X=function(a,g,d){var c=a.shareDataAttributes,f=a.t;b.logCSAEvent(A.CSA_HIT_TYPE.SHARE,g);b.logCounter("DPX.Desktop.CopySuccess");b.logCounter("Share.CopySuccess");b.logCounter(w,"CopySuccess");b.logCounterRefactor("CopySuccess",c.ingress);n.isDesktop()?function(){var a=d.find(".copy-label");a.text(f.taf_copy_url_changeover);e.delay(function(){K();a.text(f.taf_copy_name)},1E3)}():(t(".ssf-feedback").show(),K())},R=function(a){b.logCSAEvent(A.CSA_HIT_TYPE.CLICK_ERROR,a);b.logCounter("DPX.Desktop.CopyFailure");
b.logCounter("Share.CopyFailure");b.logCounter(w,"CopyFailure")},U=function(a){var g=a.shareData,c=a.channelRef,e=g.shareUrl;a=g.socialLinks;var f=a===k?{}:a;a=g.isOGTEnabled;a=a===k?!1:a;var r=g.dealsPreviewEnabled;r=r===k?!1:r;var u=g.eventPreviewTreatment;u=u===k?"C":u;e.refMarker.isBestFormatEnabled=g.isBestFormatEnabled;c=c?e.getReturnForChannel(c):e.return;e=f.shareframework||g.url;f=g.aapiBaseUrl;f=f===k?"":f;var q=g.shareAapiCsrfToken;q=q===k?"":q;var p=g.tinyUrlEnabled;p=p===k?!1:p;var A=
g.deeplinkInfo;A=A===k?{}:A;var y=g.storeId;y=y===k?"":y;var l=g.shareDataAttributes,z=l.marketplaceId;z=z===k?"":z;l=l.ingress;l=l===k?"":l;g.isUnrecognizedUsersRichPreviewEnabled&&(c=new URL(c),c.searchParams.append("starsLeft",1),c=c.toString());"c"!==u.toLowerCase()&&(c=new URL(c),g=u.match(/^T(\d+)$/),c.searchParams.append("peakEvent",g[1]),c.searchParams.append("dealEvent",r?"1":"0"),c=c.toString(),b.logCounterRefactor("EventPreview"+u,l));return{tinyUrlEnabled:p,aapiBaseUrl:f,shareAapiCsrfToken:q,
marketplaceId:z,url:c,isOGTEnabled:a,originalUrl:e||c,refMarkerId:d++,deeplinkInfo:A,storeId:y}};t(document).delegate(".ssf-channel:not(.copy,.embed)","click",function(a){a.preventDefault();a.stopPropagation();b.logCounter("DPX.Desktop.ChannelClick");b.logCounter("ShareClick");b.logCounter(w,"ChannelClick");b.logCounterRefactor("ChannelClick",q.shareDataAttributes.ingress);var g=t(this),d=g.data("key"),c=q;a=c.refererURL;var f=c.shareDataAttributes,r=c.treatment;r=r===k?"":r;var u=c.weblab;u=u===
k?"":u;var p=c.builtChannels[d],y=p.ref;d=c.shareUrl.refMarker.getClickForChannel(y);c=p.name;var z=p.getSharingUrl();b.logCSAEvent(A.CSA_HIT_TYPE.SHARE,{channel:c,refMarker:d,refererURL:a,shareDataAttributes:f,treatment:r,weblab:u});a=U({shareData:q,channelRef:y});l.showSpinner(g);N.fetch({data:a,callback:function(a){l.hideSpinner(g);a&&(z=p.getSharingUrl(a),b.logCounter("Desktop.Tiny.Success"),b.logCounterRefactor("Tiny.Success",f.ingress));if("em"===y)h.open(z,"_self");else if(n.isDesktop()){a=
screen.width;var d=screen.height,c="pi"===y?900:600,r=Math.min(c,.7*a);c=Math.min(c,.7*d);h.open(z,"_blank","toolbar\x3d0,status\x3d0,width\x3d"+r+",height\x3d"+c+",top\x3d"+(d/2-c/2)+",left\x3d"+(a/2-r/2))}else h.open(z,"_blank");K();e.trigger("ssf:event:share",q)}})});e.declarative("ssf-share-icon","click",function(d){b.logCounter("DPX.Desktop.SheetClick");b.logCounter("SheetClick");b.logCounter(w,"SheetClick");if(c)return K();z(d.$currentTarget);q=e.extend(q,d.data);q.shareDataAttributes=e.extend(m.shareDataAttributes,
d.data.shareDataAttributes);var f=q.shareDataAttributes.ingress;b.logCounterRefactor("SheetClick",f);if(!e.objectIsEmpty(d.data.associateLink)&&O.length)b.logCounter("SheetClick.Associate"),e.trigger("ac-getlink-bottomsheet-event",q);else{e.extend(p[q.lang],q.t);var u=g(q,q.channels);q.builtChannels=u;q.url=q.url.startsWith("/")?""+h.location.origin+q.url:q.url;q.shareUrl=new r(q.url,q.refId);T()&&(q.shareUrl=new r(q.url,q.refId),q.shareUrl.url.searchParams.set("psc",1));a.set("shareData",q);!n.isDesktop()||
q.isIpadFixesEnabled&&n.isIpadIOS()&&n.isNativeWebShareAvailable()?q.displayCustomShareSheet||q.customize||q.caf?Y(q):l.launchNativeShareSheet(d,q,U,G):(q.isUnrecognizedUsersRichPreviewEnabled&&q.shareUrl.url.searchParams.set("starsLeft",1),q.image=q.image||t("#imgTagWrapperId img").attr("src"),G(q),b.logCounter("DPX.Desktop.SheetOpen"),b.logCounter("SheetOpen"),b.logCounter(w,"SheetOpen"),b.logCounterRefactor("SheetOpen",f),b.logCSAEvent(A.CSA_HIT_TYPE.CLICK_SUCCESS,{channel:A.EMPTY_STRING,refMarker:q.shareUrl.refMarker.click,
refererURL:q.refererURL,shareDataAttributes:q.shareDataAttributes,treatment:q.treatment||"",weblab:q.weblab||""}));n.isSafari()&&n.isDesktop()&&(d=U({shareData:q,channelRef:A.CP_CHANNEL_REF}),N.fetch({data:d,callback:function(a){b.logCounter("TinyUrlOnSheetOpen");D=a}}));e.trigger("ssf:event:sheetOpen",q)}});t(document).delegate(".ssf-copy,.ssf-channel.copy","click",function(a){b.logCounter("ShareClick");b.logCounter("DPX.Desktop.ChannelClick");b.logCounter(w,"ChannelClick");b.logCounterRefactor("ChannelClick",
q.shareDataAttributes.ingress);a.preventDefault();var g=q;a=g.shareUrl;var d=g.shareDataAttributes,c=g.treatment;c=c===k?"":c;var f=g.weblab;f=f===k?"":f;g=g.isBestFormatEnabled;var r=A.CP_CHANNEL_REF,u=a.refMarker.getClickForChannel(r),p={channel:A.CP_CHANNEL_REF,refMarker:u,shareDataAttributes:d,treatment:c,weblab:f},y=t(this);a.refMarker.isBestFormatEnabled=g;var z=a.getReturnForChannel(r);n.isSafari()&&n.isDesktop()?navigator.clipboard.writeText(D||z).then(function(){X(q,p,y)},function(){R(p)}):
(a=U({shareData:q,channelRef:r}),l.showSpinner(y),N.fetch({data:a,callback:function(a){l.hideSpinner(y);navigator.clipboard.writeText(a||z).then(function(){X(q,p,y)},function(){R(p)})}}));e.trigger("ssf:event:share",q)});t(document).delegate(".ssf-embed,.ssf-channel.embed","click",function(a){a.preventDefault();var g=q;a=g.shareDataAttributes;var d=g.treatment;d=d===k?"":d;var c=g.weblab;c=c===k?"":c;g={channel:"embed",refMarker:g.shareUrl.refMarker.getClickForChannel(A.EMBED_CHANNEL_REF),shareDataAttributes:a,
treatment:d,weblab:c};b.logCSAEvent(A.CSA_HIT_TYPE.SHARE,g);b.logCounter("DPX.Desktop.ChannelClick");b.logCounter(w,"ChannelClick");b.logCounter("ChannelClick.Embed");b.logCounter("ShareClick");b.logCounterRefactor("ChannelClick",a.ingress);Q.create(t(".ssf-channel.embed"),q.kpModalParams).show()});x=function(){C=t(".ssf-share-trigger");F=u(C);var a=F.width;if(!t(".ssf-background").length&&F.background){var b=1.4*a;b=t('\x3cdiv class\x3d"ssf-background'+(F.floatedIcon?"-float":"")+'"\x3e\x3c/div\x3e').css({width:b,
height:b});C.wrap(b)}F.icon&&C.css({height:a,width:a,backgroundImage:"url("+y()+")"})};n.isIE()&&t(".ssf-share-trigger,.ssf-background").remove();e.on("a:popover:afterUpdatePosition:ssf-share-popover",function(a){a=a.popover.$popover;var b=a.position().left-q.popoverDistance;a.find(".a-arrow-border").css({right:24,left:""});a.css({left:b})});e.on("ssf:event:trigger-share-widget",function(a){e.trigger("a:declarative:ssf-share-icon:click",{data:a,$currentTarget:(1<arguments.length&&arguments[1]!==k?
arguments[1]:k)||J})});e.on("a:popover:show:ssf-share-popover",function(){c=!0;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","true")});e.on("a:popover:hide:ssf-share-popover",function(){c=!1;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","false")});e.on("a:popover:show:ssf-share-modal",function(){c=!0;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","true")});e.on("a:popover:hide:ssf-share-modal",
function(){c=!1;document.getElementsByClassName("ssf-share-trigger")[0].setAttribute("aria-expanded","false")});e.on("a:sheet:beforeShow:ssf-customize-bottom-sheet",function(a){a.sheet.$container.css("height","")});x()})()}catch(t){b.logCounter("DPX.Desktop.Error"),b.logCounter(w,"Error"),b.logLoad("Error"),b.logFatal("Error loading Share Framework AUI: "+t.toString())}finally{b.logCounter("DPX.Desktop.Render"),b.logCounter(w,"Render"),b.logLoad("Render"),e.trigger("ssf:event:load"),b.stopTimer(w)}return{init:x}});
"use strict";var ba=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var h=[],m=!0,a=!1,l=k;try{for(var f=e[Symbol.iterator](),b;!(m=(b=f.next()).done)&&(h.push(b.value),!n||h.length!==n);m=!0);}catch(d){a=!0,l=d}finally{try{if(!m&&f["return"])f["return"]()}finally{if(a)throw l;}}return h}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}();v.when("A","SocialShareWidgetConfig","SocialShareWidget").register("SocialShareWidgetTemplating",
function(e,n,h){h=h.SocialShareCore;var m=e.$,a=h.Detection.isClipboardAvailable,l=h.Detection.isDesktop,f=n.excludedChannels;a()||f.push("copy");var b=function(a){return'\x3cspan class\x3d"a-spinner a-spinner-'+a+' a-align-center aok-hidden"\x3e\x3c/span\x3e'};return{build:function(d){var e=d.shareUrl,c=d.socialLinks,h=c===k?{}:c;c=d.shareDataAttributes;var t=d.builtChannels,B=d.kpModalParams,p=d.t;h.email=d.mailToUri;var g='\x3cspan class\x3d"a-button ssf-copy"\x3e\n        \x3cspan class\x3d"a-button-inner"\x3e\n          \x3cinput class\x3d"a-button-input" type\x3d"button" aria-label\x3d"'+
p.taf_copy_tooltip+'"\x3e\n          \x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3e\n            \x3cbutton class\x3d"a-button-text"\x3e\n              \x3cdiv class\x3d"copy-label"\x3e\n                '+p.taf_copy_tooltip+"\n              \x3c/div\x3e\n            \x3c/button\x3e\n          \x3c/span\x3e\n        \x3c/span\x3e\n      \x3c/span\x3e";!l()&&a()&&1>m(".ssf-feedback").length&&m(document.body).append('\x3cdiv class\x3d"a-changeover ssf-feedback" style\x3d"display:none"\x3e\n          \x3cdiv class\x3d"a-changeover-inner"\x3e\n            \x3ci class\x3d"a-icon a-icon-checkmark-inverse"\x3e\x3c/i\x3e\n            \x3cstrong class\x3d"a-size-medium"\x3e'+
p.taf_copy_url_changeover+"\x3c/strong\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e");var r=function(a){return{title:p["taf_"+a.name+"_tooltip"]||a.label,label:p["taf_"+a.name+"_name"]||a.label}};n.lineMarketplaces.includes(c.marketplaceId)||h.li?f.push("pi"):f.push("li");B||f.push("embed");n.cnMarketplace.includes(c.marketplaceId)&&f.push.apply(f,I(n.nonCNChannels));return{getModal:function(){var d="",c=!0,l=!1,q=k;try{for(var m=Object.entries(t)[Symbol.iterator](),n;!(c=(n=m.next()).done);c=
!0){var x=ba(n.value,2),B=x[0],y=x[1];if(!f.includes(B)&&"copy"!==B){var z=r(y),L=h[y.name]||y.getSharingUrl();d+='\x3cli class\x3d"ssf-channel-h"\x3e\n              \x3ca class\x3d"ssf-channel a-color-base" aria-label\x3d"'+z.label+'" href\x3d"'+L+'" title\x3d"'+z.title+'" data-key\x3d"'+B+'"\x3e\n                '+b("medium")+'\n                \x3ci aria-hidden\x3d"true" style\x3d"background-image: url('+y.image+')"\x3e\x3c/i\x3e\n              \x3c/a\x3e\n              \x3cspan\x3e'+z.label+"\x3c/span\x3e\n            \x3c/li\x3e"}}}catch(H){l=
!0,q=H}finally{try{!c&&m.return&&m.return()}finally{if(l)throw q;}}c=a()?'\x3cdiv class\x3d"ssf-copy-section a-box a-padding-base a-spacing-top-large"\x3e\n              \x3cdiv class\x3d"link-section"\x3e'+e.return+'\x3c/div\x3e\n              \x3cdiv class\x3d"copy-button"\x3e'+g+"\x3c/div\x3e\n          \x3c/div\x3e":"";return'\x3ch3 class\x3d"a-spacing-large"\x3e'+p.taf_share_bottom_sheet_title+"\x3c/h3\x3e"+('\x3cdiv class\x3d"ssf-h-icons"\x3e\x3cul class\x3d"ssf-h-icons a-nostyle"\x3e'+d+"\x3c/ul\x3e\x3c/div\x3e")+
c},getPopover:function(){var a="",g=!0,d=!1,c=k;try{for(var e=Object.entries(t)[Symbol.iterator](),p;!(g=(p=e.next()).done);g=!0){var l=ba(p.value,2),m=l[0],y=l[1];if(!f.includes(m)){var z=r(y),n=h[y.name]||y.getSharingUrl();a+='\x3cli class\x3d"ssf-channel-v"\x3e\n              \x3ca class\x3d"ssf-channel '+m+' a-color-base" aria-label\x3d"'+z.label+'" href\x3d"'+n+'" title\x3d"'+z.title+'" data-key\x3d"'+m+'"\x3e\n                '+b("small")+'\n                \x3ci aria-hidden\x3d"true" style\x3d"background-image: url('+
y.image+')"\x3e\x3c/i\x3e\n                \x3cspan class\x3d"'+m+'-label"\x3e'+z.label+"\x3c/span\x3e\n              \x3c/a\x3e\n            \x3c/li\x3e"}}}catch(H){d=!0,c=H}finally{try{!g&&e.return&&e.return()}finally{if(d)throw c;}}return'\x3cul class\x3d"a-nostyle"\x3e'+a+"\x3c/ul\x3e"},getBottom:function(){var a="",g=!0,d=!1,c=k;try{for(var e=Object.entries(t)[Symbol.iterator](),l;!(g=(l=e.next()).done);g=!0){var m=ba(l.value,2),n=m[0],y=m[1];if(!f.includes(n)){var z=r(y),x=h[y.name]||y.getSharingUrl();
a+='\x3cli class\x3d"ssf-channel-b a-padding-base"\x3e\n              \x3ca class\x3d"ssf-channel '+n+' a-color-base" aria-label\x3d"'+z.label+'" href\x3d"'+x+'" title\x3d"'+z.title+'" data-key\x3d"'+n+'"\x3e\n                '+b("medium")+'\n                \x3ci aria-hidden\x3d"true" style\x3d"background-image: url('+y.image+')"\x3e\x3c/i\x3e\n                \x3cspan class\x3d"a-size-base-plus"\x3e'+z.label+"\x3c/span\x3e\n              \x3c/a\x3e\n              \x3c/li\x3e"}}}catch(H){d=!0,c=
H}finally{try{!g&&e.return&&e.return()}finally{if(d)throw c;}}return'\x3cdiv class\x3d"a-padding-base ssf-header"\x3e\n          \x3ch4\x3e'+p.taf_share_bottom_sheet_title+'\x3c/h4\x3e\n        \x3c/div\x3e\x3cdiv class\x3d"ssf-scroll"\x3e\x3cul class\x3d"a-nostyle"\x3e'+(a+"\x3c/ul\x3e")+"\x3c/ul\x3e\x3c/div\x3e"},getCustomize:function(){var a=void 0;v.now("SocialShareWidgetCustomizeTemplate").execute(function(b){a=d.customize?b.getCustomizeBox(p):""});var g='\x3ch3 class\x3d"a-spacing-base a-spacing-top-base"\x3e'+
p.taf_share_bottom_sheet_title+"\x3c/h3\x3e",c='\x3cdiv class\x3d"ssf-heading-container"\x3e\x3cimg class\x3d"ssf-back-btn" src\x3d"https://m.media-amazon.com/images/G/01/share-icons/arrow-left.svg"\x3e'+g+"\x3c/div\x3e",e='\x3cdiv class\x3d"a-padding-base a-box ssf-preview-container ssf-no-border" style\x3d"background-image: url('+d.image+')"\x3e'+b("medium")+"\x3c/div\x3e",f=d.caf?'\x3cdiv class\x3d"a-row a-spacing-top-large'+(d.customize?"":" a-spacing-large")+'"\x3e\n          \x3cdiv class\x3d"a-column a-span9"\x3e\n            \x3cstrong class\x3d"ssf-caf-toggle-label"\x3e'+
p.taf_custshare_caf_ingress+'\x3c/strong\x3e\n          \x3c/div\x3e\n          \x3cdiv class\x3d"a-column a-span3 a-text-right a-span-last"\x3e\n            \x3cdiv class\x3d"a-switch-row ssf-caf-toggle"\x3e\n          \x3cinput class\x3d"a-declarative a-switch-input" data-action\x3d"a-switch-input" name\x3d"caf" type\x3d"checkbox"\x3e\n          \x3clabel class\x3d"a-switch-label a-declarative" data-action\x3d"a-switch-label"\x3e\n            \x3cdiv class\x3d"a-switch a-declarative" data-action\x3d"a-switch"\x3e\n              \x3ca class\x3d"a-switch-control" aria-label\x3d"caf" style\x3d"transform: translateX(-1px) translateZ(0px);"\x3e\x3c/a\x3e\n            \x3c/div\x3e\n          \x3c/label\x3e\n        \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e':
"",r='\x3cspan class\x3d"a-button a-button-primary a-spacing-top-small ssf-customize-share-btn"\x3e\n          \x3cspan class\x3d"a-button-inner"\x3e\n            \x3cinput class\x3d"a-button-input" type\x3d"button" aria-labelledby\x3d"ssf-customize-share-btn"\x3e\n            \x3cspan class\x3d"a-button-text" aria-hidden\x3d"true" id\x3d"ssf-customize-share-btn"\x3e\n              '+d.shareLabel+"\n              "+b("small")+"\n            \x3c/span\x3e\n          \x3c/span\x3e\n        \x3c/span\x3e";
return'\x3cdiv class\x3d"a-padding-base ssf-customize-container-one"\x3e'+g+e+f+a+r+"\x3c/div\x3e"+(d.customize?'\x3cdiv class\x3d"a-padding-base ssf-customize-container-two aok-hidden"\x3e'+c+e+f+'\x3cdiv class\x3d"a-row a-spacing-top-base a-padding-base ssf-tabs"\x3e\x3c/div\x3e'+r+"\x3c/div\x3e":"")}}}}});"use strict";v.when("jQuery","SocialShareWidget","SocialShareWidgetState","SocialShareWidgetLinkUtil","SocialShareWidgetAPI").register("SocialShareWidgetTiny",function(e,n,B,m,a){n=n.SocialShareCore;
var l=n.Metrics,f=n.Constants;return{fetch:function(b){var d=b.data,n=b.isAsync,c=n===k?!0:n,w=b.callback;try{if(0<d.refMarkerId){var t=new URL(d.url),E=t.searchParams.get("ref_");E&&(E=E+"_"+d.refMarkerId,t.searchParams.set("ref_",E),d.url=t.toString())}var p=B.get("shareData");if(B.get("dpx")){var g=B.get("shareAapiCsrfToken"),r=B.get("aapiBaseUrl");if("C"!==p.skipTwisterAPI){var A=new URL(d.url);A.searchParams.append("skipTwisterOG","T2"===p.skipTwisterAPI?2:1);d.url=A.toString()}if(p.isBestFormatEnabled){var u=
new URL(d.url);u.searchParams.append("bestFormat","true");d.url=u.toString()}if(p.isShortTitleGatingEnabled&&""!==p.titleSource){var C=new URL(d.url);C.searchParams.append("titleSource",p.titleSource);d.url=C.toString()}d.url=m.getLinkWithFlippedStarsLeft(d.url);"dprv"===p.refId&&(d.shareAapiCsrfToken=g,d.aapiBaseUrl=r,d.tinyUrlEnabled=!0,l.logCounter("reviews.tiny"))}var q=h.location.protocol+"//";if(d.isOGTEnabled){var F=new URL(d.url);F.searchParams.append("newOGT","1");d.url=F.toString()}var D=
d.deeplinkInfo;if(D&&D.isDisabled&&D.flag!=k){var O=new URL(d.url);O.searchParams.append("nodl",D.flag);d.url=O.toString()}if(d.isOnShareGatingEnabled)a.build(p).onShare(c,d.url,d.extractedRef,d.osType,w);else if(d.tinyUrlEnabled)if(d.aapiBaseUrl&&d.shareAapiCsrfToken&&d.marketplaceId)(function(){var a=""+q+d.aapiBaseUrl+"/api/marketplaces/"+d.marketplaceId+"/social-share/tinyurl",b={longUrl:d.url},g={"Accept-Language":"en-US",Accept:'application/vnd.com.amazon.api+json; type\x3d"social-share.tinyurl/v1"',
"x-api-csrf-token":d.shareAapiCsrfToken,"Content-Type":"application/x-www-form-urlencoded","x-amzn-encrypted-slate-token":B.get("slateToken")};l.startTimer("Tiny");e.ajax(a,{type:"POST",headers:g,xhrFields:{withCredentials:!0},contentType:"application/x-www-form-urlencoded",async:c,data:b,success:function(a){l.logCounter("Tiny.Response");l.logCounter("Desktop.Tiny.Response");l.logCounterRefactor("Tiny.Response");a.entity&&a.entity.shortUrl?(w(a.entity.shortUrl.url),l.logCounter("Tiny.Success")):(v.log("Error Generating TinyURL. with share url "+
d.url,"ERROR",f.SSF_AUI_PACKAGE_ATTRIBUTION),l.logCounter("Tiny.Error"),w(d.url))},error:function(b){b&&b.status!=k&&0===b.status?l.logCounter("Tiny.Blocked"):(v.log("Error Generating TinyURL with share url "+d.url+", Error Code: "+b.status+", Error Response: "+b.responseText+", Endpoint: "+a,"ERROR",f.SSF_AUI_PACKAGE_ATTRIBUTION),l.logCounter("Tiny.Error"),l.logCounter("Desktop.Tiny.Error"),l.logCounterRefactor("Tiny.Error"));w(d.url)},complete:function(){l.stopTimer("Tiny")}})})();else return l.logCounter("Tiny.Unavailable"),
w(d.url);else return w(d.url)}catch(J){return v.log("Error generating tinyURL: "+J.toString(),"ERROR",f.SSF_AUI_PACKAGE_ATTRIBUTION),d.url}}}});"use strict";v.when("A").register("SocialShareWidgetState",function(e){var k="social-"+h.ue_id+"-share",B={slateToken:e.$('meta[name\x3d"encrypted-slate-token"]').attr("content")||"",dpx:!1};e.state(k,B);return{getCurrent:function(){return e.state(k)},get:function(e){return this.getCurrent()[e]},getAndReset:function(e){var a=this.get(e);a&&this.set(e,null);
return a},set:function(m,a){var l=this.getCurrent();e.trigger("ssf:event:state:set",l);if(!m)return l;l[m]=a;l=e.state(k,l);e.trigger("ssf:event:state:changed",l);return l}}});"use strict";v.when("jQuery","SocialShareWidget","SocialShareWidgetState").register("SocialShareWidgetAPI",function(e,n,B){n=n.SocialShareCore;var m=n.Constants,a=n.Metrics,l=h.location.protocol+"//",f=a.getMetricName(e,m.customize),b=Object.freeze({GET:"GET",POST:"POST",PUT:"PUT"}),d=Object.freeze({generateImage:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.generate.customized.image.response/v1"',
externalizeImage:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.externalize.customized.image.response/v1"',fetchTabs:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.custom.ssapis.product.shareable.attributes.response/v1"',getWeblabTreatmentAndTrigger:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.weblab.treatment-and-trigger.response/v1"',onShare:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.social-share.on-share.response/v1"',
fetchCAFID:'application/vnd.com.amazon.api+json; type\x3d"aapi.consultafriendcontracts.custom.consult-a-friend.feedback-request.response/v1"',fetchHmpPollId:'application/vnd.com.amazon.api+json; type\x3d"aapi.consultafriendcontracts.custom.helpmepick.create-poll.response/v1"',getShortTitle:'application/vnd.com.amazon.api+json; type\x3d"aapi.socialshareapicontracts.social-share.get-short-title.response/v1"'}),x=function(a){return(a=a.entity)&&"SUCCEEDED"===a.status?a.tabs.map(function(a){var b={id:a.id,
heading:a.shortDisplayName,text:a.longDisplayName,isQuote:!0};a.params&&(b.values=Object.values(a.params)[0],b.isQuote=!1);return b}):[]};return{build:function(c){var n=c.shareAapiCsrfToken,h=c.locale,E=c.cafAapiCsrfToken,p=c.productType,g=c.shareDataAttributes,r=g.marketplaceId,A=g.asin,u=g.ingress,C=l+c.aapiBaseUrl,q=B.get("slateToken");q||a.logCounter("slate.missing");var F=function(a){return C+"/custom/socialshareapicontracts/marketplaces/"+r+"/products/"+A+"/shareframework/"+a},D=function(a){var b=
a.async;e.ajax({url:a.url,type:a.type,async:b===k?!0:b,data:a.data,headers:{"Accept-Language":h,Accept:a.accept,"x-api-csrf-token":a.cafToken||n,"Content-Type":"application/x-www-form-urlencoded","x-amzn-encrypted-slate-token":q},xhrFields:{withCredentials:!0},success:a.success,error:a.error,complete:a.complete})};return{generateImage:function(g,c){var e=F("generatecustomizedimage");a.startTimer("GenerateCustomizeImage");D({url:e,type:b.POST,data:g,accept:d.generateImage,success:function(b){"SUCCEEDED"===
b.entity.status?(a.logCounter("GenerateCustomizeImage.Success"),a.logCounter(f,"generateCustomizeImageSuccess"),a.logCounterRefactor("generateCustomizeImageSuccess",u)):(a.logCounter("GenerateCustomizeImage.Fail"),a.logCounter(f,"generateCustomizeImageFail"),a.logCounterRefactor("generateCustomizeImageFail",u));c(b)},error:function(b){a.logCounter("GenerateCustomizeImage.Error");a.logCounter(f,"generateCustomizeImageError");a.logCounterRefactor("generateCustomizeImageError",u);a.logCounter("generateCustomizeImageError");
v.log("Error generating customize image. with request URL "+e+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",m.SSF_AUI_PACKAGE_ATTRIBUTION);c(b)},complete:function(){a.stopTimer("GenerateCustomizeImage")}})},externalizeImage:function(g,c,e){var r=F("externalizecustomizedimage?customizedImageUrl\x3d"+g);a.startTimer("ExternalizeImage");D({url:r,type:b.PUT,accept:d.externalizeImage,async:e,success:function(a){c(a)},error:function(b){a.logCounter(f,"externalizeImageFail");a.logCounterRefactor("externalizeImageFail",
u);a.logCounter("externalizeImageFail");v.log("Error externalizing image. with request URL "+r+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",m.SSF_AUI_PACKAGE_ATTRIBUTION);c({})},complete:function(){a.stopTimer("ExternalizeImage")}})},fetchTabs:function(g){var c=F("productshareableattributes?locale\x3d"+h+"\x26type\x3d"+p);a.startTimer("FetchTabs");D({url:c,type:b.GET,accept:d.fetchTabs,success:function(b){a.logCounter(f,"FetchTabsSuccess");a.logCounterRefactor("FetchTabsSuccess",
u);g(x(b))},error:function(b){a.logCounter(f,"FetchTabsFail");a.logCounterRefactor("FetchTabsFail",u);a.logCounter("FetchTabsFail");v.log("Error Fetching customize share tabs. with request URL "+c+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",m.SSF_AUI_PACKAGE_ATTRIBUTION);g([])},complete:function(){a.stopTimer("FetchTabs")}})},fetchCAFID:function(g){var e=1<arguments.length&&arguments[1]!==k?arguments[1]:!0,p=C+"/custom/consultafriendcontracts/marketplaces/"+r+"/consultafriend/feedback-request/"+
A;a.logCounter(f,"CAF.createCAFID.called");a.logCounterRefactor("CAF.createCAFID.called",u);a.startTimer("CafIdGeneration");D({url:p,type:b.POST,accept:d.fetchCAFID,async:e,cafToken:E,success:function(a){g(a.entity&&a.entity.cafId,A,c.url)},error:function(b){a.logCounter(f,"CAF.createCAFID.failed");a.logCounterRefactor("CAF.createCAFID.failed",u);v.log("Error Creating CAF Id. with request URL "+p+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",m.SSF_AUI_PACKAGE_ATTRIBUTION);
g()},complete:function(){a.stopTimer("CafIdGeneration")}})},fetchHmpPollId:function(g){var f=1<arguments.length&&arguments[1]!==k?arguments[1]:!0,p=c.hmpAapiCsrfToken,q=e.param(c.hmpState,!0),l=C+"/custom/consultafriendcontracts/marketplaces/"+r+"/helpmepick/poll?"+q;a.logCounter("HMP.fetchHmpPollId.called."+u);a.startTimer("HmpIdGeneration");D({url:l,type:b.POST,accept:d.fetchHmpPollId,async:f,cafToken:p,success:function(a){g(a.entity&&a.entity.cafId)},error:function(b){a.logCounter("HMP.fetchHmpPollId.failed."+
u);v.log("Error Fetching Poll Id. with request URL "+l+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",m.SSF_AUI_PACKAGE_ATTRIBUTION);g()},complete:function(){a.stopTimer("HmpIdGeneration")}})},getWeblabTreatmentAndTrigger:function(g,c,e){var f=C+"/custom/socialshareapicontracts/marketplaces/"+r+"/weblab/get-weblab-treatment-and-record?name\x3d"+c;a.startTimer("GetWeblabTreatmentAndTriggerMetric");D({url:f,type:b.GET,accept:d.getWeblabTreatmentAndTrigger,async:g,success:function(b){a.logCounter("GetWeblabTreatmentAndRecordSuccess");
e(b)},error:function(b){a.logCounter("GetWeblabTreatmentAndRecordFail");v.log("Error calling weblab treatment and trigger. with request URL "+f+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",m.SSF_AUI_PACKAGE_ATTRIBUTION);e([])},complete:function(){a.stopTimer("GetWeblabTreatmentAndTriggerMetric")}})},onShare:function(g,c,e,f,p){var u=C+"/custom/socialshareapicontracts/marketplaces/"+r+"/products/"+A+"/shareframework/onshare";a.startTimer("onShare");D({url:u,type:b.POST,accept:d.onShare,
async:g,data:{longUrl:c,channel:e,osType:f},success:function(b){"SUCCEEDED"===b.entity.status?(p(b.entity.shortUrl.url),a.logCounter("OnShare.Success")):(v.log("The request was sent successfully, but the response status indicates a failure with request URL "+c,"ERROR",m.SSF_AUI_PACKAGE_ATTRIBUTION),a.logCounter("OnShare.Failure"),p(c))},error:function(b){a.logCounter("OnShare.Error");v.log("Error calling on share. with request URL "+c,"ERROR",m.SSF_AUI_PACKAGE_ATTRIBUTION);p([])},complete:function(){a.stopTimer("onShare")}})},
getShortTitle:function(g,c){var e=C+"/custom/socialshareapicontracts/marketplaces/"+r+"/products/"+A+"/shareframework/getshorttitle";a.startTimer("GetShortTitle");D({url:e,type:b.GET,accept:d.getShortTitle,async:g,success:function(b){"SUCCEEDED"===b.entity.status?(a.logCounter("GetShortTitle.Success"),c(b.entity)):(v.log("The request was sent successfully, but the response status indicates a failure","ERROR",m.SSF_AUI_PACKAGE_ATTRIBUTION),a.logCounter("GetShortTitle.Failure"),c([]))},error:function(b){a.logCounter("GetShortTitle.Error");
v.log("Error calling get short title. with request URL "+e+", Error Code: "+b.status+". Error Response: "+b.responseText,"ERROR",m.SSF_AUI_PACKAGE_ATTRIBUTION);c([])},complete:function(){a.stopTimer("GetShortTitle")}})}}}}});"use strict";v.when("A","SocialShareWidget","SocialShareWidgetAPI").register("SocialShareWidgetCustomShareOptionsTemplate",function(e,h,B){function m(a,b,c,d){B.build(a).getWeblabTreatmentAndTrigger(b,c,function(a){d(a.entity)})}function a(a){return new Promise(function(b){m(a,
!1,"TMT_SOCIAL_SHARE_ANDROID_COPY_LINK_1061126",function(a){b(a&&"SUCCEEDED"===a.status&&"T1"===a.treatment)})})}var l=e.capabilities.rtl,f=h.SocialShareCore.Detection.isAndroid(),b=void 0,d=e.constants.HIDE_CLASS;v.when("mash").execute(function(a){return b=a});var n=function(){b||v.now("mash").execute(function(a){return b=a});return b},c=function(a,b){if(!n()||0===a.length)return b([]);var g=a.length,c=[];a.forEach(function(a){w(a,function(a,d){g--;d&&(c[a.label.toLowerCase()]=a);(3<=c.length||0>=
g)&&b(c)})})},w=function(a,b){var g="whatsapp"===a.label.toLowerCase()&&f;n().canLaunchIntentURL({url:a.schemeURI,successCallback:function(c){if(g)return b(a,!0);b(a,c)},failCallback:function(){if(g)return b(a,!0);b(a,!1)}})},t=function(a,b){var g=b.stringId,c=b.className,e=b.label;b="https://m.media-amazon.com/images/G/01/share-icons/"+b.image;return'\x3cli class\x3d"ssf-custom-share-option '+(c===k?"":c)+'"  data-name\x3d"'+e.toLowerCase()+'"\x3e\n                    \x3cdiv class\x3d"ssf-custom-share-spinner" role\x3d"button"\x3e\n                        '+
('\x3cspan class\x3d"a-spinner a-spinner-medium a-align-center '+d+'"\x3e\x3c/span\x3e')+'\n                        \x3cimg src\x3d"'+b+'" title\x3d"'+e+'" aria-label\x3d"'+e+'"/\x3e\n                    \x3c/div\x3e\n                    \x3cspan class\x3d"label a-size-small"\x3e'+(a.t[g]||e)+"\x3c/span\x3e\n                 \x3c/li\x3e"},E=function(a){var b=1<arguments.length&&arguments[1]!==k?arguments[1]:"";a=a.startsWith("http")?a:"https://m.media-amazon.com/images/G/01/share-icons/"+a;return'\x3cimg class\x3d"'+
b+'" src\x3d"'+a+'" /\x3e'},p=function(){return'\x3cspan class\x3d"a-size-mini ssf-rating-count"\x3e'+(0<arguments.length&&arguments[0]!==k?arguments[0]:"")+"\x3c/span\x3e"};return{getChannelsHtml:function(b,d){var g="";c(b.customShareOptions,function(c){var p=e.extend(c,b.defaultCustomShareOptions);b.customShareBuiltChannels=p;var r=Object.keys(p),k=[],u="",l="";if(0===r.length)throw Error("Fallback to Native Sheet: channel key list is empty.");c=function(c){var d=r[c];f&&"copy"===d?b.isUnsignedShareSheetCopyLinkOverrideEnabled?
u=t(b,p[d]):b.isAndroidCopyLinkGatingEnabled&&k.push(a(b).then(function(a){a&&(u=t(b,p[d]))})):"more"===d?n()&&(l=t(b,p[d])):g+=t(b,p[d])};for(var h=0;h<r.length;h++)c(h);Promise.all(k).then(function(){u&&(g+=u);l&&(g+=l);d('\n                    \x3cdiv class\x3d"ssf-custom-channels-container a-color-base-background"\x3e\n                        \x3cul class\x3d"ssf-custom-share-options-container a-unordered-list a-nostyle"\x3e\n                            '+g+"\n                        \x3c/ul\x3e\n                    \x3c/div\x3e\n                ")})})},
getPreviewImage:function(a){var b=a.starRating,c=a.numberOfReviews,g=l?"r":"";a='\x3cdiv class\x3d"ssf-cso-p-image ssf-regular"\x3e'+E(a.productImage,"ssf-regular")+"\x3c/div\x3e";b=b?E("RIO"+b+g+".png","ssf-caf-stars"):"";c=p(c);return'\x3cdiv class\x3d"ssf-cso-p-image"\x3e'+a+('\x3cdiv class\x3d"ssf-cso-stickers ssf-regular"\x3e'+b+c+"\x3c/div\x3e")+"\x3c/div\x3e"},getErrorAlert:function(a){return'\x3cdiv class\x3d"ssf-error-text a-row '+d+'"\x3e\n          \x3cdiv class\x3d"a-box a-alert-inline a-alert-inline-error" role\x3d"alert"\x3e\n              \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                  \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                  \x3cdiv class\x3d"a-alert-content"\x3e\n                    \x3cspan class\x3d"ssf-error-generic '+
d+'"\x3e'+a.taf_custshare_channel_error_generic+'\x3c/span\x3e\n                    \x3cspan class\x3d"ssf-error-email '+d+'"\x3e'+a.taf_custshare_channel_error_email+"\x3c/span\x3e\n                  \x3c/div\x3e\n              \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e"},getAvailableChannels:c}});"use strict";v.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetState").register("SocialShareWidgetCustomShareOptions",function(e,n,B,m){var a=e.$;n=n.SocialShareCore;
var l=n.ShareSheet,f=n.Metrics,b=n.Constants,d=void 0,x=void 0,c=void 0,w=void 0,t=!1,E=n.Detection.isAndroid(),p=e.constants.HIDE_CLASS;v.when("mash").execute(function(a){x=a});v.when("SocialShareWidgetTiny").execute(function(a){d=a});v.when("SocialShareWidgetCustomizeUtils").execute(function(a){c=a});v.when("SocialShareWidgetCAFUtils").execute(function(a){w=a});return{init:function(g,r,n,u,B,q){var A=g.customShareBuiltChannels;r=g.isCustomShareOptionsSheetEnabled;var C=r===k?!1:r;r=g.isFallbackShareUrlEnabled;
var O=r===k?!1:r;r=g.caf;var J=r===k?!1:r,y=g.shareDataAttributes;r=g.incrementShareCount;var z=r===k?null:r;r=g.treatment;var L=r===k?"":r;r=g.weblab;var H=r===k?"":r;r=g.refererURL;var Q=r===k?"":r,M="C";g.cafIngressId===b.CAF_INFO_ICON_KEY?M="T1":g.cafIngressId===b.CAF_LEARN_MORE_KEY&&(M="T2");e.on("ssf:event:caf-switch-change",function(a){t=a});var V=function(a){a.addClass("ssf-noclick");a.find(".a-spinner").removeClass(p)},P=function(a){a.removeClass("ssf-noclick");a.find(".a-spinner").addClass(p)},
N=function(){return t?(g.t["taf-share-caf-messageprefix"]||"")+" "+g.title:g.title},S=function(a,b,e){t?w.prepareShareUrl(g,a,d,b,function(a,b){return e(a,b)}):g&&g.isHmpShareSheet?w.prepareHmpShareUrl(g,a,d,b,function(a,b){return e(a,b)}):c.prepareShareUrl(g,a,d,b,function(a){return e(a)})},G=function(a){a&&e.trigger("ssf:event:caf-share-complete-success",g)},W=function(){x.dispatchEvent({type:"axf:consultAFriend:shareCompletedSuccessfully",detail:{isHmp:!0}})},Y=function(a,c,d,f){try{var p=encodeURIComponent(f+
" \n "+d);return"Messages"===c?e.capabilities.ios?"sms:///\x26body\x3d"+p:"mms:?\x26body\x3d"+p:"Email"===c?a=a.replace("\x26url\x3d{url}","").replace("{subject}",encodeURIComponent(g.emailSubject)).replace("{body}",""+p):"whatsApp"===c?a=a.replace("{url}",""+p):a=a.replace("{text}",encodeURIComponent(f)).replace("{url}",encodeURIComponent(d)).replace("{titleAndURL}",encodeURIComponent(p))}catch(aa){return v.log("Failed to generate shareUrl, error: "+aa.toString(),"ERROR",b.SSF_AUI_PACKAGE_ATTRIBUTION),
a}},K=function(a){if(t){f.logCounter("Caf.customShareOptions.ChannelClick."+a);var d="C";g.cafIngressId===b.CAF_INFO_ICON_KEY?d="T1":g.cafIngressId===b.CAF_LEARN_MORE_KEY&&(d="T2");f.logCounter("CAF.edIngress.ChannelClick."+a+"."+d)}else c.imageState.isEmpty()?f.logCounter("CustomShareOptions.ChannelClick."+a):f.logCounter("Books.customShareOptions.ChannelClick."+a)},T=function(){var a=0<arguments.length&&arguments[0]!==k?arguments[0]:"";a=0<a.length?"."+a:"";return t?""+b.CAF_CUSTOM_SHEET_CLICK_LATENCY_METRIC+
a:c.imageState.isEmpty()?""+b.CUSTOM_SHEET_CLICK_LATENCY_METRIC+a:""+b.BOOKS_CUSTOM_SHEET_CLICK_LATENCY_METRIC+a},X=function(){var a=T();f.startTimer(a);S(b.EMPTY_STRING,!0,function(b){var c=1<arguments.length&&arguments[1]!==k?arguments[1]:"";g.tinyUrl=b;var d=g;c&&(d=e.extend({channelSelectCB:function(){G(c)},cafSwitchEnabled:t},g),d.title=N());g&&g.isHmpShareSheet&&(d=e.extend({channelSelectCB:function(){W()}},g),d.title=N());(new l(d)).launch(function(){f.logCounter("customShareOptions.SheetOpen")});
f.stopTimer(a)})},R=function(a,c){var d=m.getAndReset(b.customizeShareStateKey);return{channel:a,refMarker:c,refererURL:Q,shareDataAttributes:y,treatment:L,weblab:H,isCustomShareOptionsSheetEnabled:C,caf:J,cafSwitchEnabled:t,customizeShareCSAData:d,cafEdCXIngressWeblabTreatment:M}};a(".custom-share-native-sheet").unbind("click").click(function(a){try{K("more"),n(),X()}catch(fa){v.log('Failed to launch native share sheet via "More" button, error: '+fa.toString(),"ERROR",b.SSF_AUI_PACKAGE_ATTRIBUTION)}});
var U=function(a){return new Promise(function(b,c){var d=document.createElement("textarea");d.value=a;document.body.appendChild(d);d.focus();d.select();try{var g=document.execCommand("copy");document.body.removeChild(d);g?b():c()}catch(aa){c(aa)}})},ca=function(d,e,p,r){d=g.shareUrl.refMarker.getClickForChannel(d);f.logCSAEvent(b.CSA_HIT_TYPE.SHARE,R("copy",d));t?f.logCounter("Caf.CustomShareOptions.CopySuccess"):c.imageState.isEmpty()?f.logCounter("customShareOptions.CopySuccess"):f.logCounter("Books.CustomShareOptions.CopySuccess");
a(".ssf-feedback").show();P(e);n();f.stopTimer(p);r&&G(r);g&&g.isHmpShareSheet&&W();"function"===typeof z&&z(d)},I=function(a,b,d){f.stopTimer(d);t?f.logCounter("Caf.CustomShareOptions.CopyFail"):c.imageState.isEmpty()?f.logCounter("CustomShareOptions.CopyFail"):f.logCounter("Books.CustomShareOptions.CopyFail");q({shareData:g,channelRef:a,caf:J,cafSwitchEnabled:t});P(b)};a(".custom-share-copy").unbind("click").click(function(c){var d=this;try{(function(){var c=T();f.startTimer(c);K("copy");var g=
b.CUSTOM_SHARE_OPTIONS_CP_CHANNEL_REF,e=a(d);V(e);S(g,!1,function(a){var b=1<arguments.length&&arguments[1]!==k?arguments[1]:"";E?U(a).then(function(){return ca(g,e,c,b)},function(){return I(g,e,c)}):E||navigator.clipboard.writeText(a).then(function(){return ca(g,e,c,b)},function(){return I(g,e,c)})})})()}catch(Z){v.log("Failed to share using copy channel, error: "+Z.toString(),"ERROR",b.SSF_AUI_PACKAGE_ATTRIBUTION)}});a(".ssf-custom-share-option:not(.custom-share-copy,.custom-share-native-sheet)").unbind("click");
a(".ssf-custom-share-option:not(.custom-share-copy,.custom-share-native-sheet)").click(function(c){var d=this;try{(function(){var c=a(d),e=c.data("name"),r=T(),u=T(e);f.startTimer(r);f.startTimer(u);var q=A[e],l=b.CUSTOM_SHARE_OPTIONS_REF_PREFIX+"_"+q.ref,m=g.shareUrl.refMarker.getClickForChannel(l);a(".ssf-error-text").addClass(p);V(c);S(l,!0,function(a){var d=1<arguments.length&&arguments[1]!==k?arguments[1]:"",p=Y(q.shareUrl,q.label,a,N());x?x.launchIntentURL({url:p,successCallback:function(){f.stopTimer(r);
f.stopTimer(u);P(c);n();f.logCounterRefactor("ChannelClick",y.ingress);f.logCounter("ChannelClick");K(e);"function"===typeof z&&z(m);d&&G(d);g&&g.isHmpShareSheet&&W();f.logCSAEvent(b.CSA_HIT_TYPE.SHARE,R(e,m))},failCallback:function(d){v.log("Failed to launch intent URL "+p+" with error code: "+d.code,"WARN",b.SSF_AUI_PACKAGE_ATTRIBUTION);f.logCounter("customShareOptions.LaunchShareIntentFail");P(c);f.stopTimer(r);f.stopTimer(u);O&&q.fallbackShareUrl?(f.logCSAEvent(b.CSA_HIT_TYPE.SHARE,R(e,m)),h.location=
Y(q.fallbackShareUrl,q.label,a,N())):(n(),X())}}):(P(c),f.logCSAEvent(b.CSA_HIT_TYPE.SHARE,R(e,m)),n(),h.open(p,"_blank"))})})()}catch(Z){v.log("Failed to share, error: "+Z.toString(),"ERROR",b.SSF_AUI_PACKAGE_ATTRIBUTION)}})}}});"use strict";v.when("A","SocialShareWidgetState","atf").execute(function(e,k){var h=e.$("#ssf-primary-widget-desktop");e=e.$("#ssf-share-action");h=h.data("ssfShareIcon")||e.data("ssfShareIcon")||{};k.set("shareAapiCsrfToken",h.shareAapiCsrfToken);k.set("aapiBaseUrl",h.aapiBaseUrl);
k.set("dpx",!0)});"use strict";v.when("A","SocialShareWidget").execute(function(e,k){var h=void 0,m=k.SocialShareCore.Metrics;k=e.debounce(function(){clearTimeout(h)},200,!0);e.declarative("ssf-share-icon","touchstart",function(){h=setTimeout(function(){m.logCounter("longpress")},500)});e.declarative("ssf-share-icon","touchmove touchend",k)});"use strict";v.when("A","SocialShareWidget").register("SocialShareWidgetMetrics",function(e,h){var n=h.SocialShareCore.Metrics,m=function(a){a=a.pathname.split("/").filter(function(a){return e.contains(a,
"ref\x3d")});return(a.length?a[0]:"").replace("ref\x3d","")},a=function(a){return(a=a.match(/cm_sw_r_(?:cso_)?(.*?)_/))?a[1]:k};v.now("SocialShareWidgetLoadedBTF").execute(function(a){a?n.logCounter("btf:render"):n.logCounter("atf:render")});v.when("atf").execute(function(){try{var k=e.capabilities,f=k.tablet;k.isIE&&n.logCounter("render.ie");(f||600<screen.width&&k.isAmazonApp)&&n.logCounter("render.tablet");var b=new URL(location.href);if(b.href.includes("cm_sw_r_")){var d=b.searchParams.get("ref")||
b.searchParams.get("ref_");d||(d=m(b));if(d.startsWith("cm_sw_r_")){var h=a(d);h&&n.logCounter("return.visit."+h);n.logCounter("return.visit")}}b.searchParams.get("cafId")&&n.logCounter("CAF.cafDeepLink")}catch(c){n.logCounter("urlparam.issue")}});return{getRefEq:m,getChannelFromRef:a}});"use strict";v.register("SocialShareWidgetLinkUtil",function(){return{getLinkWithFlippedStarsLeft:function(e){try{var k=new URL(e.href||e),h=k.searchParams;if(h.get("ref_")&&h.get("starsLeft")){var m=h.get("ref_"),
a=h.get("starsLeft"),l=h.get("newPreview"),f=h.get("skipTwisterOG"),b=h.get("bestFormat"),d=h.get("language"),x=h.get("titleSource");h.delete("ref_");h.delete("starsLeft");h.delete("newPreview");h.delete("skipTwisterOG");h.delete("bestFormat");h.delete("language");h.delete("titleSource");k.searchParams.append("ref_",m);k.searchParams.append("starsLeft",a);l&&k.searchParams.append("newPreview",l);f&&k.searchParams.append("skipTwisterOG",f);b&&k.searchParams.append("bestFormat",b);d&&k.searchParams.append("language",
d);x&&k.searchParams.append("titleSource",x)}return k.toString()}catch(c){return e.toString()}}}});"use strict";v.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetCustomizeUtils").register("SocialShareWidgetCustomize",function(e,n,B,m){n=n.SocialShareCore;var a=e.$,l=n.ShareSheet,f=n.Url,b=n.Metrics,d=n.Constants,x=b.getMetricName(a,d.customize),c=e.constants.HIDE_CLASS,w=function(){},t,E=0,p=void 0,g=void 0,r=void 0,A=!1;v.when("a-checkbox").execute(function(a){return g=a});
v.when("a-button").execute(function(a){return p=a});try{(function(){var u=m.imageState;e.declarative("cafCheckboxAction","change",function(){r()});e.on(m.getEventName("Hide"),function(a){a.sheet.getContentContainer().remove();u.clear()});e.on("a:sheet:afterShow:ssf-customize-bottom-sheet",function(a){J(a.sheet)});var n=function(c,d,g){var f=a(".ssf-preview-container"),p=a(".ssf-caf-preview"),k=(t=d)?"CAF.switchOn":"CAF.switchOff";b.logCounter(x,k);b.logCounterRefactor(k,g);e.trigger("ssf:event:caf-switch-change",
d);u.isConsultAFriendPreview=d;g=m.getImageData(c,u);A?m.getBackendPreviewImage(c,g,function(a){a?D(a):e.trigger("ssf:event:preview-generation-failed",c)}):d?(p.fadeIn(100),f.hide()):(f.fadeIn(100),p.hide())},q=function(a){var b=a.shareData,c=a.channelRef,d=b.shareUrl;a=b.isOGTEnabled;a=a===k?!1:a;var g=b.aapiBaseUrl;g=g===k?"":g;var e=b.shareAapiCsrfToken;e=e===k?"":e;var f=b.tinyUrlEnabled;f=f===k?!1:f;var p=b.deeplinkInfo;p=p===k?{}:p;var r=b.shareDataAttributes,h=b.storeId;h=h===k?"":h;d.refMarker.isBestFormatEnabled=
b.isBestFormatEnabled;c=c?d.getReturnForChannel(c):d.return;d=r.marketplaceId;return{tinyUrlEnabled:f,aapiBaseUrl:g,shareAapiCsrfToken:e,marketplaceId:d===k?"":d,url:c,isOGTEnabled:a,originalUrl:b.url||c,refMarkerId:E++,deeplinkInfo:p,storeId:h}},F=function(g,r,u,m,n,A,t){var y=u.shareDataAttributes,C=u.url,z=y.asin,w=y.ingress;y=u.refId;a(".ssf-customize-share-btn").find(".a-spinner").addClass(c);p(".ssf-customize-share-btn").enable();r();var F=!1;r=new URL(A===k?C:A);m&&(y=d.CAF_REF_PREFIX+"_"+
y,r.searchParams.append("cafId",m),r.searchParams.append("cafASIN",n),n!==z&&b.logCounter(x,"CAF.ShareASINMismatch"),F=!0);r.searchParams.append("language",h.languageOfPreference||u.locale||"en_US");u.shareUrl=new f(r.toString(),y);var B=q({shareData:u});v.when("SocialShareWidgetTiny").execute(function(a){a.fetch({data:B,callback:function(a){u.tinyUrl=a;t&&t();a=e.extend({channelSelectCB:function(){m&&e.trigger("ssf:event:caf-share-complete-success",u)},cafSwitchEnabled:F},u);(new l(a)).launch(function(){e.delay(function(a){g(u)},
100);m?(b.logCounter(x,"CAF.ShareSheetOpen"),b.logCounterRefactor("CAF.ShareSheetOpen",w)):(b.logCounter(x,"ShareSheetOpen"),b.logCounterRefactor("ShareSheetOpen",w))})}})})},D=function(a){if(!(1<arguments.length&&arguments[1]!==k&&arguments[1])){var b=new Image;b.src=a;b.onload=function(){u.productImageProperties.width=this.width;u.productImageProperties.height=this.height}}},O=function(a){a=a.popularHighlightStrings;var b=[];b.push({id:"BackgroundImageTab",physicalId:"417kcYISTOL.jpg",url:"https://m.media-amazon.com/images/I/417kcYISTOL.jpg"});
a.length&&(defaultQuote=a[0].replace(/"||/g,""),b.push({id:"BookQuotesTab",value:defaultQuote}));return b},J=function(a){var c=a.$contentContainer,d=parseInt(a.$container.css("max-height"));c=parseInt(c.height());d<c?(a.$contentContainer.css("height",d),b.logCounter("SmallDevice")):a.$contentContainer.css("height","auto")};w=function(f,h,q,l){var C=f.shareDataAttributes,w=f.treatment,y=w===k?"":w;w=f.weblab;var z=w===k?"":w;w=f.caf;w=w===k?!1:w;var E=f.isCafPreviewGenerationMigrationEnabled,H=C.ingress;
u.currentPreview=m.getRegularImage();t=f.cafSwitch;w&&E&&(A=!0);w=function(a,b){0<b.length&&b.forEach(function(a){u.set(a)})};var G=function(a){b.logCounter(x,a);b.logCounterRefactor(a,H);b.logCounter(a)},I=function(b,c){B.build(b).fetchTabs(function(d){v.now("SocialShareWidgetCustomizeTemplate").execute(function(g){a(".ssf-tabs").html(g.getTabs(b,d));c(d)})})};r=function(){var a=g(".ssf-caf-toggle");n(f,a.isChecked(),H)};f.customize&&f.customizePreSelected?(E=O(f),u.defaultCustomizationOptions=E,
w(f,E),w=m.getImageData(f,u),m.getBackendPreviewImage(f,w,function(a){u.currentImage=a;D(a);m.adjustPreviewHeight();J(l)})):A?(w=m.getImageData(f,u),m.getBackendPreviewImage(f,w,function(a){a?D(a):e.trigger("ssf:event:preview-generation-failed",f)})):n(f,t,H);a(".ssf-customize-share-btn").click(function(){p(".ssf-customize-share-btn").isEnabled()&&(a(".ssf-customize-share-btn").find(".a-spinner").removeClass(c),p(".ssf-customize-share-btn").disable(),t?(G("CAF.shareClick"),b.startTimer("CAF.fetchCAFAndTinyURL"),
f.title=(f.t["taf-share-caf-messageprefix"]||"")+" "+f.title,B.build(f).fetchCAFID(function(a,c,d){F(h,q,f,a,c,d,function(){b.stopTimer("CAF.fetchCAFAndTinyURL")})})):(G("shareClick"),b.logCSAEvent(d.CSA_HIT_TYPE.CUSTOMIZE_SHARE,{channel:d.EMPTY_STRING,refMarker:f.shareUrl.refMarker.click,shareDataAttributes:C,treatment:y,weblab:z}),F(h,q,f)))});a(".ssf-caf-toggle-ed-ingress").click(function(){var a="C";f.cafIngressId===d.CAF_INFO_ICON_KEY?a="T1":f.cafIngressId===d.CAF_LEARN_MORE_KEY&&(a="T2");G("CAF.edIngressTapped"+
a);m.transitionToCAFEducationPage();J(l)});a(".ssf-customize-icon").click(function(){p(this).isEnabled()&&(G("CustomizeButtonClick"),p(this).disable(),u.currentPreview=m.getCustomizeImage(),I(f,function(b){b.forEach(function(b){var c="input[type\x3dradio][name\x3d"+b.id+"]";a(c).change(function(b){b=JSON.parse(b.target.value);L(b);a(c).unbind("click");a(this).one("click",function(a){a=a.target;a.checked=!1;a=JSON.parse(a.value);K(a)})})});f.customizePreSelected&&(a("#BackgroundImageTab1").trigger("click"),
a("#BookQuotesTab0").trigger("click"));b=m.getImageData(f,u);m.getBackendPreviewImage(f,b,function(a){u.currentImage=a;m.transitionToCustomizePage();m.adjustCustomizedPreviewHeight();J(l);D(a)})}))});a(".ssf-customize-edit-poll-btn").click(function(){p(this).isEnabled()&&(p(this).disable(),e.trigger("ssf-edit-your-poll-trigger",f.hmpState),G("HMP.EditYourPoll.Clicked"),q())});var L=function(a){m.setImage();Array.isArray(a)?a.forEach(function(a){u.set(a)}):u.set(a);var b=m.getImageData(f,u);G(a.id+
"Select");m.getBackendPreviewImage(f,b,function(a){u.currentImage=a;D(a)})},K=function(a){m.setImage();G(a.id+"Unselect");u.unset(a);a=m.getImageData(f,u);m.getBackendPreviewImage(f,a,function(a){u.currentImage=a;D(a)})};a(".ssf-back-btn").click(function(){m.isCAFEducationPageVisible()&&(f.cafIngressId===d.CAF_INFO_ICON_KEY?G("CAF.edBackTappedT1"):f.cafIngressId===d.CAF_LEARN_MORE_KEY?G("CAF.edBackTappedT2"):G("CAF.edBackTappedC"));u.currentPreview=m.getRegularImage();b.logCounter("BackButtonClick");
m.resetPreviewState(u);m.transitionToDefaultPage();J(l)});v.when("a-checkbox").execute(function(b){a(".ssf-caf-toggle-label").click(function(){var a=b(".ssf-caf-toggle");a.check(!a.isChecked())})});e.on("ssf:event:preview-generation-failed",function(b){A=!1;a(".ssf-backend-preview").addClass(c);a(".ssf-html-preview").removeClass(c);n(b,t,H)})}})()}catch(u){b.logCounter(x,"Error"),b.logLoad("Error"),b.logFatal("Error loading Customize widget, Share Framework AUI: "+u.toString())}finally{b.logCounter(x,
"Render"),b.logLoad("Render")}return{init:w}});"use strict";v.when("A","SocialShareWidget").register("SocialShareWidgetCustomizeTemplate",function(e,h){h=h.SocialShareCore;var n=e.capabilities.rtl,m=h.Constants,a=h.ToolBelt,l=function(a){var b=1<arguments.length&&arguments[1]!==k?arguments[1]:"";a=a.startsWith("http")?a:"https://m.media-amazon.com/images/G/01/share-icons/"+a;return'\x3cimg class\x3d"'+b+'" src\x3d"'+a+'"/\x3e'},f=function(a){var b=1<arguments.length&&arguments[1]!==k?arguments[1]:
"ssf-product-title-text";e.on("a:sheet:afterShow:ssf-customize-bottom-sheet",function(){e.$(".ssf-title-label").text(a.title)});return'\x3cdiv class\x3d"a-color-secondary a-padding-small '+b+'"\x3e\n      \x3cspan class\x3d"ssf-title-label" id\x3d"ssf-title-label"\x3e\n        \x3c!-- TITLE  --\x3e\n      \x3c/span\x3e\n    \x3c/div\x3e'},b=function(a){return'\x3cdiv class\x3d"ssf-product-preview"\x3e'+d(a.productImage,"","","ssf-title-label")+"\x3c/div\x3e"},d=function(a){var b=1<arguments.length&&
arguments[1]!==k?arguments[1]:"",c=2<arguments.length&&arguments[2]!==k?arguments[2]:"",d=3<arguments.length&&arguments[3]!==k?arguments[3]:"";a=a.startsWith("http")?a:"https://m.media-amazon.com/images/G/01/share-icons/"+a;return c||d?'\x3cimg class\x3d"'+b+'" '+(d?'aria-labelledby\x3d"'+d+'"':"")+" "+(c?'aria-label\x3d"'+c+'"':"")+' src\x3d"'+a+'"/\x3e':l(a,b)},x=function(){return'\x3cspan class\x3d"a-size-mini ssf-rating-count"\x3e'+(0<arguments.length&&arguments[0]!==k?arguments[0]:"")+"\x3c/span\x3e"},
c=function(a){return'\x3cul class\x3d"ssf-options-box-container a-unordered-list a-nostyle"\x3e'+a.values.map(function(b,c){var d=e.extend(b,{id:a.id}),g={id:a.id,position:c,val:d,background:b.url};a.isQuote&&(g=e.extend(g,{center:!0,width:150,content:d.displayText,background:k}));d=g.id;c=g.position;b=g.content;b=b===k?"":b;var f=g.width,p=f===k?100:f,h=g.background;f=g.center;f=f===k?!1:f;g=g.val;p='style\x3d"width: '+p+"px;background-image: url("+(h===k?"":h)+");background-size: "+p+"px "+p+'px;"';
h=JSON.stringify(g);c=d+c;g=g.label||"";var r='\x3cspan class\x3d"aok-offscreen"\x3e'+g+"\x3c/span\x3e";f&&(r='\x3cspan class\x3d"a-box-inner a-text-center ssf-q-text"\x3e'+b+"\x3c/span\x3e");return'\x3cli class\x3d"ssf-options-box" aria-label\x3d\''+g+"'\x3e\n              \x3cinput id\x3d\""+c+'" type\x3d"radio" name\x3d"'+d+"\" value\x3d'"+h+"' aria-label\x3d'"+g+"'\x3e\x3c/input\x3e\n              \x3clabel for\x3d\""+c+'" class\x3d"a-box a-text-normal" '+p+"\x3e"+r+"\x3c/label\x3e\n            \x3c/li\x3e"}).join("")+
"\x3c/ul\x3e"},w=function(a){var b=1<arguments.length&&arguments[1]!==k?arguments[1]:"",c=2<arguments.length&&arguments[2]!==k?arguments[2]:!1;return'\x3cli class\x3d"a-tab-heading ssf-customize-tab '+(c?"a-active":"")+'" data-a-tab-name\x3d"ssf-tab-'+a+'" role\x3d"presentation"\x3e\n              \x3ca aria-label\x3d"'+b+'" href\x3d"#" role\x3d"tab" aria-selected\x3d"'+(c?"true":"false")+'" '+(c?"":'tabindex\x3d"-1"')+"\x3e"+b+"\x3c/a\x3e\n            \x3c/li\x3e"},t=function(a){return'\x3cdiv data-a-name\x3d"ssf-tab-'+
a+'" class\x3d"ssf-tab-'+a+" a-box a-box-tab a-tab-content "+(3<arguments.length&&arguments[3]!==k&&arguments[3]?"":"a-hidden")+' a-padding-mini" role\x3d"tabpanel" tabindex\x3d"0"\x3e\n              '+(1<arguments.length&&arguments[1]!==k?arguments[1]:"")+"\n            \x3c/div\x3e"},v=function(){return(0<arguments.length&&arguments[0]!==k?arguments[0]:[]).map(function(a){a=a.replace(/"||/g,"");return{displayText:""+a+"",value:a}})};return{getTabs:function(a,b){var d=a.popularHighlightStrings;
if(!b.length)return"";var g="",e="",f=-1;b.forEach(function(a,b){a.isQuote&&(a.values=v(d));if(!a.values.length)return"";-1===f&&(f=b);b=b===f;g+=w(a.id,a.heading,b);e+=t(a.id,c(a),a.text,b)});return'\x3cdiv class\x3d"a-tab-container a-size-small"\x3e'+('\x3cul data-action\x3d"a-tabs" class\x3d"a-tabs a-declarative ssf-customize-tab a-spacing-small" role\x3d"tablist" data-a-tabs\x3d\'{"name": "customize-tabs"}\'\x3e\n        '+g+"\x3c/ul\x3e"+e)+"\x3c/div\x3e"},getCustomizeBox:function(a){return'\x3cdiv class\x3d"a-box a-color-alternate-background a-spacing-top-large a-padding-base ssf-customize-box"\x3e\n      '+
('\x3ch5 class\x3d"a-size-small a-spacing-micro"\x3e'+a.taf_custshare_customizelong+"\x3c/h5\x3e")+('\x3cp class\x3d"a-size-small a-color-secondary"\x3e'+a.taf_custshare_customizedesc+"\x3c/p\x3e")+('\x3cspan class\x3d"a-button a-button-small" id\x3d"ssf-customize-share"\x3e\n      \x3cspan class\x3d"a-button-inner"\x3e\n        \x3cbutton class\x3d"a-button-text" type\x3d"button"\x3e'+a.taf_custshare_customizeshort+"\x3c/button\x3e\n      \x3c/span\x3e\n    \x3c/span\x3e")+"\n    \x3c/div\x3e"},
getBackArrow:function(a){a=a["taf-share-general-gobacktopage"]||"";return'\x3cbutton type\x3d"button" class\x3d"ssf-back-btn a-padding-small" aria-label\x3d"'+a+'" tabindex\x3d"0"\x3e'+('\x3cimg src\x3d"https://m.media-amazon.com/images/G/01/share-icons/arrow-left.svg" alt\x3d"'+a+'"\x3e')+"\x3c/button\x3e"},tabsContainer:'\x3cdiv class\x3d"a-row a-spacing-top-micro ssf-tabs a-color-base-background a-padding-mini"\x3e\x3c/div\x3e',getImageSection:function(a){var c=f(a);var e=a.isCafPreviewGenerationMigrationEnabled;
var h=a.customize,p=a.customizePreSelected;e=a.caf&&e?!0:h&&p?!0:!1;h='\x3cdiv class\x3d"a-padding-base ssf-preview-container"\x3e\n      '+(a.customize?'\x3cspan id\x3d"ssf-customize-icon" class\x3d"ssf-customize-icon"\x3e'+l("customize")+"\x3c/span\x3e":"")+'\n      \x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\n    \x3c/div\x3e';e='\x3cdiv class\x3d"a-box ssf-preview-box"\x3e\n              \x3cdiv class\x3d"ssf-backend-preview '+
(e?"":"aok-hidden")+'"\x3e'+h+'\x3c/div\x3e\n              \x3cdiv class\x3d"ssf-html-preview '+(e?"aok-hidden":"")+'"\x3e';var m=a.customize;p=a.t;h=b({productImage:a.productImage});var q=a.starRating,t=q===k?"ZERO":q;q=a.customize;q=q===k?!1:q;var w=a.numberOfReviews,v=a.caf;a=a.isUnrecognizedUsersRichPreviewEnabled;t=d("RIO"+t+(n?"r":"")+".png","ssf-caf-stars",t+" star rating");w=x(w);a='\x3cdiv class\x3d"ssf-caf-rating"\x3e\n              \x3cdiv class\x3d"'+(v||a||q?"ssf-caf-rating-left":"ssf-caf-rating-right")+
'"\x3e\n                '+t+w+"\n              \x3c/div\x3e\n            \x3c/div\x3e";m=m?'\x3cspan id\x3d"ssf-customize-icon" class\x3d"ssf-customize-icon"\x3e'+l("customize")+"\x3c/span\x3e":"";p='\x3cp class\x3d"a-size-base a-spacing-micro ssf-caf-text"\x3e'+p.taf_custshare_caf_recipientemoji+"\x3c/p\x3e";q=d("caf-emojis"+(n?"r":"")+".png","ssf-caf-emojis","A heart eyes emoji, a thinking emoji, and a frowning emoji");return e+('\x3cdiv class\x3d"a-padding-base ssf-preview-container"\x3e\n              '+
m+'\n              \x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\n              '+h+"\n              "+a+"\n            \x3c/div\x3e "+('\x3cdiv class\x3d"ssf-caf-preview"\x3e\n              \x3cdiv class\x3d"a-padding-base ssf-caf-image"\x3e\n                \x3cdiv class\x3d"a-row ssf-caf-image-stickers"\x3e'+h+('\x3cdiv class\x3d"a-column ssf-caf-stickers"\x3e'+p+q+"\x3c/div\x3e")+"\x3c/div\x3e\n                  "+a+"\n                \x3c/div\x3e\n            \x3c/div\x3e"))+
"\x3c/div\x3e\n              "+c+"\n            \x3c/div\x3e"},getHmpImageSection:function(c){var d=c.productImage;c='\x3cdiv class\x3d"a-color-secondary a-padding-small ssf-title-text-hmp"\x3e\n    \x3cspan\x3e\n    '+a.sanitizeInput(c.hmpState.title)+"\n    \x3c/span\x3e\n    \x3c/div\x3e";return'\x3cdiv class\x3d"a-box ssf-preview-box"\x3e\n                '+b({productImage:d})+"\n                "+c+"\n            \x3c/div\x3e"},getCustomizePreviewImage:function(a){return'\x3cdiv class\x3d"a-box ssf-no-border ssf-cus-img-container"\x3e\n      \x3cdiv class\x3d"ssf-cus-img"\x3e\x3cspan class\x3d"a-spinner a-spinner-medium a-align-center ssf-preview-spinner aok-hidden"\x3e\x3c/span\x3e\x3c/div\x3e\n      '+
f(a,"ssf-product-title-text-small")+"\n    \x3c/div\x3e"},getToggleContainer:function(a){var b=2<arguments.length&&arguments[2]!==k?arguments[2]:"",c=(1<arguments.length&&arguments[1]!==k?arguments[1]:"").match(/^T(\d+)$/);c=a["taf_custshare_caf_ingress"+(c?"_alt"+c[1]:"")];var d='\x3csmall\x3e\x3ca class\x3d"ssf-caf-toggle-ed-ingress a-size-base a-link-normal"\x3e'+(a.taf_custshare_caf_ingress_learn_more||"Learn more")+"\x3c/a\x3e\x3c/small\x3e",e=l("https://m.media-amazon.com/images/G/01/AppFirst/ConsultAFriend/information-default.png");
return'\x3cdiv class\x3d"a-row a-spacing-top-medium-plus a-grid-vertical-align a-grid-center a-spacing-micro"\x3e\n      \x3cdiv class\x3d"a-column a-span1"\x3e\x3cdiv class\x3d"a-checkbox a-declarative a-checkbox-fancy ssf-caf-toggle" data-action\x3d"cafCheckboxAction"\x3e\n      \x3clabel class\x3d"a-padding-none" aria-labelledby\x3d"caf-checkbox-label"\x3e\n        \x3cinput class\x3d"a-declarative" name\x3d"caf" type\x3d"checkbox"\x3e\n        \x3ci class\x3d"a-icon a-icon-checkbox"\x3e\x3c/i\x3e\n      \x3c/label\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n      \x3cdiv class\x3d"a-column a-span10"\x3e\n        \x3csmall id\x3d"caf-checkbox-label" class\x3d"ssf-caf-toggle-label a-size-base"\x3e'+
c+".\x3c/small\x3e\n        "+(b===m.CAF_INFO_ICON_KEY?'\x3cspan class\x3d"ssf-info-icon ssf-caf-toggle-ed-ingress"\x3e\x3cstrong\x3e'+e+"\x3c/strong\x3e\x3c/span\x3e":b===m.CAF_LEARN_MORE_KEY?d:"")+"\n      \x3c/div\x3e\n    \x3c/div\x3e"},getEducationCXBody:function(a){return'\x3cdiv class\x3d"a-box ssf-no-border"\x3e\n        '+('\x3cdiv class\x3d"a-color-secondary a-padding-small"\x3e\n      \x3cspan\x3e\n        '+(a.taf_custshare_caf_education_body||"Ask your friends for help. Use this option to ask friends to react to the item with an emoji. You can share the link by messaging your friends or posting on social media. Youll get a notification for each reaction.")+
"\n      \x3c/span\x3e\n    \x3c/div\x3e")+'\n        \x3cdiv class\x3d"ssf-caf-education-video a-padding-base"\x3e\n          \x3cvideo id\x3d"ssf-caf-education-video" loop playsinline\x3e\n            \x3csource src\x3d"https://m.media-amazon.com/images/G/01/AppFirst/ConsultAFriend/caf-education-no-audio.mp4" type\x3d"video/mp4"\x3e\n          \x3c/video\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e'}}});"use strict";var da="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:
function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};v.when("A","SocialShareWidget","SocialShareWidgetAPI","SocialShareWidgetState").register("SocialShareWidgetCustomizeUtils",function(e,n,v,m){function a(a){var b=a.values,c=b.BackgroundImageTab,d=b.DeviceCoverImageTab,g=b.BookQuotesTab;b=b.isConsultAFriendPreview;var e=a.productImageProperties;a=e.width;e=e.height;return{bgId:(c===k?{}:c).physicalId||"",deviceId:(d===k?{}:d).physicalId||
"",quoteValue:(g===k?{}:g).value||"",isConsultAFriendPreview:b===k?!1:b,width:a===k?"":a,height:e===k?"":e}}function l(a,b){var c=a.shareUrl,g=a.socialLinks,e=g===k?{}:g;g=a.isOGTEnabled;g=g===k?!1:g;c.refMarker.isBestFormatEnabled=a.isBestFormatEnabled;c=b?c.getReturnForChannel(b):c.return;b=b.replace(w.CUSTOM_SHARE_OPTIONS_REF_PREFIX+"_","");e=e.shareframework||a.url;var f=a.aapiBaseUrl;f=f===k?"":f;var h=a.shareAapiCsrfToken;h=h===k?"":h;var r=a.tinyUrlEnabled;r=r===k?!1:r;var l=a.deeplinkInfo;
l=l===k?{}:l;var m=a.isOnShareGatingEnabled;m=m===k?!1:m;var n=a.shareDataAttributes;a=n.marketplaceId;a=a===k?"":a;n=n.asin;n=n===k?"":n;var t=d();return{tinyUrlEnabled:r,aapiBaseUrl:f,shareAapiCsrfToken:h,marketplaceId:a,asin:n,url:c,osType:t,isOGTEnabled:g,originalUrl:e||c,refMarkerId:p++,deeplinkInfo:l,isOnShareGatingEnabled:m,extractedRef:b}}function f(a,b,c,d){if(c.isEmpty()||da(c.currentImage)===k||da(c.currentImage)!==k&&!c.currentImage.length)return d({});c=encodeURIComponent(c.currentImage);
v.build(a).externalizeImage(c,d,b)}function b(a,b,c){v.build(a).generateImage(b,function(a){c(a.entity)})}function d(){switch(!0){case e.capabilities.ios:return"ios";case e.capabilities.android:return"android";default:return"unknown"}}n=n.SocialShareCore;var x=e.constants.HIDE_CLASS,c=e.$,w=n.Constants,t=n.Metrics,E=n.Url,p=0;return{getEventName:function(a){return"a:sheet:after"+a+":ssf-customize-bottom-sheet"},getCustomizeImage:function(){return c(".ssf-cus-img")},getCustomizeImageContainer:function(){return c(".ssf-cus-img-container")},
getRegularImage:function(){return c(".ssf-backend-preview .ssf-preview-container")},getPreviewBox:function(){return c(".ssf-preview-box")},setImage:function(a){this.imageState.currentPreview.css("background-image",'url("'+a+'")')},showSpinner:function(){this.imageState.currentPreview.find(".a-spinner").removeClass(x)},hideSpinner:function(){this.imageState.currentPreview.find(".a-spinner").addClass(x)},transitionToCustomizePage:function(){c(".ssf-customize-container-one").addClass(x);c(".ssf-customize-container-two").removeClass(x).addClass("ssf-customize-transition")},
transitionToCAFEducationPage:function(){c(".ssf-customize-container-one").addClass(x);c(".ssf-customize-container-three").removeClass(x).addClass("ssf-customize-transition");var a=c("#ssf-caf-education-video").get(0);a&&(a.currentTime=0,a.play())},isCAFEducationPageVisible:function(){return c(".ssf-customize-container-three").is(":visible")},adjustCustomizedPreviewHeight:function(){this.getCustomizeImageContainer().css({width:.76*h.innerWidth});var a=parseInt(this.getCustomizeImage().css("border-left-width"))+
parseInt(this.getCustomizeImage().css("border-right-width")),b=this.getCustomizeImage().innerWidth();this.getCustomizeImage().css({height:(b+a)/1.91})},adjustPreviewHeight:function(){this.getPreviewBox().css({width:.93*h.innerWidth});var a=parseInt(this.getRegularImage().css("border-left-width"))+parseInt(this.getRegularImage().css("border-right-width")),b=this.getRegularImage().innerWidth();this.getRegularImage().css({height:(b+a)/1.91})},transitionToDefaultPage:function(){c(".ssf-customize-container-two").addClass(x);
c(".ssf-customize-container-three").addClass(x);c(".ssf-customize-container-one").removeClass(x).addClass("ssf-customize-transition-back")},getImageData:function(b,c){var d=a(c);return{productImageUrl:b.productImage,starRating:b.starRating||"",numberOfReviews:b.numberOfReviews||"",backgroundImagePhysicalId:d.bgId,deviceCoverImagePhysicalId:d.deviceId,bookQuote:d.quoteValue,productImageWidth:d.width,productImageHeight:d.height,consultAFriendPreviewEnabled:c.isConsultAFriendPreview,previewDohEnabled:b.previewDoh}},
resetPreviewState:function(a){a.clear();0<a.defaultCustomizationOptions.length&&a.defaultCustomizationOptions.forEach(function(b){a.set(b)})},getBackendPreviewImage:function(a,c,d){var e=this;e.setImage("");e.showSpinner();b(a,c,function(a){a&&"SUCCEEDED"===a.status?(a=a.customizedImage.url,e.hideSpinner(),e.setImage(a),d(a)):d()})},setCustomizeCSAData:function(b,c){var d=w.customizeShareStateKey;c=a(c);var e=w.TRUE,f=w.FALSE;m.set(d,{backgroundImagePhysicalId:c.bgId,deviceCoverImagePhysicalId:c.deviceId,
hasQuote:0<c.quoteValue.length?e:f,isCustomizedExperienceEnabled:b.customize?e:f,isCustomized:c.bgId||c.deviceId||c.quoteValue?e:f,customizePreSelected:b.customizePreSelected?e:f,isQuotesAvailable:b.popularHighlightStrings?e:f})},prepareShareUrl:function(a,b,c,d,e){this.setCustomizeCSAData(a,this.imageState);f(a,d,this.imageState,function(f){var g=f.entity;f=new URL(a.url);var h=b;g&&g.physicalId?(t.logCounterRefactor("externalizeImageSuccess"),f.searchParams.append("cspi",g.physicalId),h=b+"_"+w.BOOKS_REF_PREFIX):
(a.customizePreSelected&&(t.logCounter("booksPreviewNotAvailable"),h=b+"_"+w.BOOKS_REF_PREFIX+"_"+w.BOOKS_CUSTOMIZE_PREVIEW_NOT_AVAILABLE),(a.caf||a.isUnrecognizedUsersRichPreviewEnabled||a.customize)&&f.searchParams.append("starsLeft","1"),a.eventPreviewTreatment&&"c"!==a.eventPreviewTreatment.toLowerCase()&&(g=a.eventPreviewTreatment.match(/^T(\d+)$/),f.searchParams.append("peakEvent",g[1]),t.logCounterRefactor("EventPreview"+a.eventPreviewTreatment,a.shareDataAttributes.ingress)));a.shareUrl=new E(f.toString(),
a.refId);f=l(a,h);c.fetch({data:f,isAsync:d,callback:function(a){e(a)}})})},imageState:{clear:function(){this.values={}},isEmpty:function(){return c.isEmptyObject(this.values)},values:{},unset:function(a){delete this.values[a.id]},set:function(a){this.values[a.id]=a},defaultCustomizationOptions:[],currentImage:"",isConsultAFriendPreview:!1,currentPreview:"",productImageProperties:{width:0,height:0}}}});"use strict";v.when("A","SocialShareWidget","SocialShareWidgetAPI").register("SocialShareWidgetCAFUtils",
function(e,n,v){function m(d,e){var c=d.shareUrl,f=d.socialLinks;f=f===k?{}:f;var l=d.isOGTEnabled;l=l===k?!1:l;c.refMarker.isBestFormatEnabled=d.isBestFormatEnabled;var m=d.isHmpShareSheet?"hmp":a.CAF_REF_PREFIX;e=e?c.getReturnForChannel(m+"_"+e):c.return;e=new URL(e);(d.caf||d.isUnrecognizedUsersRichPreviewEnabled)&&e.searchParams.append("starsLeft","1");e.searchParams.has("language")||e.searchParams.append("language",h.languageOfPreference||d.locale||"en_US");e=e.toString();c=d.aapiBaseUrl;m=d.shareAapiCsrfToken;
var p=d.tinyUrlEnabled,g=d.deeplinkInfo;g=g===k?{}:g;var n=d.shareDataAttributes.marketplaceId;return{tinyUrlEnabled:p===k?!1:p,aapiBaseUrl:c===k?"":c,shareAapiCsrfToken:m===k?"":m,marketplaceId:n===k?"":n,url:e,isOGTEnabled:l,originalUrl:f.shareframework||d.url||e,refMarkerId:b++,deeplinkInfo:g}}var a=n.SocialShareCore.Constants,l=n.SocialShareCore.Url,f=n.SocialShareCore.Metrics,b=0;return{prepareShareUrl:function(b,e,c,h,k){var d=b.refId;f.logCounterRefactor("CAF.shareChannelClick",b.ingress);
f.startTimer("CAF.fetchCAFAndTinyURL");d=a.CAF_REF_PREFIX+"_"+d;v.build(b).fetchCAFID(function(a,g){var n=new URL(b.url);a&&n.searchParams.append("cafId",a);g&&n.searchParams.append("cafASIN",g);b.shareUrl=new l(n.toString(),d);g=m(b,e);c.fetch({data:g,isAsync:h,callback:function(b){f.stopTimer("CAF.fetchCAFAndTinyURL");k(b,a)}})},h)},prepareHmpShareUrl:function(a,b,c,h,k){var d=a.refId;f.logCounter("HMP.shareChannelClick."+a.ingress);f.startTimer("HMP.fetchPollIdAndTinyURL");d="hmp."+d;v.build(a).fetchHmpPollId(function(n){var g=
new URL(a.url);n&&g.searchParams.append("hmpId",n);a.shareUrl=new l(g.toString(),d);a.url=g.toString();g=m(a,b);c.fetch({data:g,isAsync:h,callback:function(b){f.stopTimer("HMP.fetchPollIdAndTinyURL");e.trigger("ssf:event:hmpPollCreated",a);k(b,n)}})},h)}}});"use strict";v.when("A","SocialShareWidget","SocialShareWidgetTiny").register("SocialShareWidgetNativeUtils",function(e,h,k){var m=h.SocialShareCore.ShareSheet,a=e.constants.HIDE_CLASS,l=h.SocialShareCore.Metrics,f=l.getMetricName(e.$);return{showSpinner:function(b){b.addClass("ssf-noclick");
b.find(".a-spinner").removeClass(a);b.find("i").hide()},hideSpinner:function(b){b.removeClass("ssf-noclick");b.find(".a-spinner").addClass(a);b.find("i").show()},launchNativeShareSheet:function(a,d,h,c){var b=this;this.showSpinner(a.$currentTarget);h=h({shareData:d});var n=d.shareDataAttributes.ingress;d=e.extend(d,{sheetShownCallback:function(){b.hideSpinner(a.$currentTarget)}});k.fetch({data:h,callback:function(e){d.tinyUrl=e;(new m(d)).launch(function(){c(d);l.logCounter("DPX.Desktop.SheetOpen");
l.logCounter(f,"SheetOpen");l.logCounter("SheetOpen");l.logCounterRefactor("SheetOpen",n);b.hideSpinner(a.$currentTarget)})}})}}})});